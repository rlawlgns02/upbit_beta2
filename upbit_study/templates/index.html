<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏóÖÎπÑÌä∏ Ï¢ÖÎ™© Î∂ÑÏÑù ÏãúÏä§ÌÖú</title>
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <style>
        * { font-family: 'Inter', sans-serif; }

        .status-green { color: #10b981; }
        .status-red { color: #ef4444; }

        .card {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-bar {
            transition: width 0.3s ease;
        }

        /* AI Î∂ÑÏÑù Î°úÎî©Î∞î Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes loading-bar {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(0%); }
            100% { transform: translateX(100%); }
        }

        .animate-loading-bar {
            animation: loading-bar 1.5s ease-in-out infinite;
        }

        /* Ïä¨ÎùºÏù¥Îçî Ïä§ÌÉÄÏùº */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 12px;
            border-radius: 6px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        input[type="range"].accent-green-500::-webkit-slider-thumb {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        input[type="range"].accent-red-500::-webkit-slider-thumb {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        /* Firefox Ïä¨ÎùºÏù¥Îçî Ïä§ÌÉÄÏùº */
        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#64748b',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50" x-data="app()">
    <!-- Ìó§Îçî -->
    <header class="bg-white border-b">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-600 rounded flex items-center justify-center">
                        <i class="fas fa-chart-line text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">ÏóÖÎπÑÌä∏ Ï¢ÖÎ™© Î∂ÑÏÑù</h1>
                        <p class="text-sm text-gray-500">Ïã§ÏãúÍ∞Ñ ÏãúÏû• Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù ÏãúÏä§ÌÖú</p>
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2 text-sm">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-gray-600">Ïã§ÏãúÍ∞Ñ Ïó∞Í≤∞</span>
                    </div>
                    <span class="text-sm text-gray-500" x-text="currentTime"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
    <main class="container mx-auto px-6 py-8">
        <!-- Ïã§ÏãúÍ∞Ñ Ï£ºÏöî ÏΩîÏù∏ -->
        <section class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-900">Ï£ºÏöî Ï¢ÖÎ™© Ïã§ÏãúÍ∞Ñ ÏãúÏÑ∏</h2>
                <button @click="showMarketSelector = true"
                        class="text-gray-400 hover:text-gray-600 transition"
                        title="Ï¢ÖÎ™© ÏÑ§Ï†ï">
                    <i class="fas fa-cog"></i>
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                <template x-for="coin in realtimeData" :key="coin.market">
                    <div class="card rounded-lg p-4 hover:shadow-md transition">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-700" x-text="coin.market"></span>
                            <span class="text-xs px-2 py-1 rounded"
                                  :class="coin.change_rate > 0 ? 'bg-red-50 text-red-600' : 'bg-blue-50 text-blue-600'"
                                  x-text="(coin.change_rate > 0 ? '+' : '') + coin.change_rate.toFixed(2) + '%'"></span>
                        </div>
                        <p class="text-xl font-bold text-gray-900 mb-1" x-text="formatPrice(coin.price)"></p>
                        <p class="text-xs text-gray-500">Í±∞ÎûòÎüâ: <span x-text="formatVolume(coin.volume)"></span></p>
                    </div>
                </template>
            </div>
        </section>

        <!-- ÌÉ≠ Î©îÎâ¥ -->
        <div class="bg-white rounded-lg border mb-6">
            <div class="flex border-b">
                <button @click="activeTab = 'recommendations'"
                        :class="activeTab === 'recommendations' ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    Ï∂îÏ≤ú Ï¢ÖÎ™©
                </button>
                <button @click="activeTab = 'all-markets'"
                        :class="activeTab === 'all-markets' ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    Ï†ÑÏ≤¥ Ï¢ÖÎ™©
                </button>
                <button @click="activeTab = 'news'"
                        :class="activeTab === 'news' ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    <i class="fas fa-newspaper mr-1"></i> Îâ¥Ïä§ Î∂ÑÏÑù
                </button>
                <button @click="activeTab = 'trading'; checkApiConnection(); loadCoinPreview()"
                        :class="activeTab === 'trading' ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    <i class="fas fa-robot mr-1"></i> ÏûêÎèôÎß§Îß§
                </button>
                <button @click="selectedMarket = null; activeTab = 'lstm-trader';"
                        :class="activeTab === 'lstm-trader' ? 'border-b-2 border-green-600 text-green-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    <i class="fas fa-bolt mr-1"></i> LSTM Îã®ÌÉÄ
                </button>
                <button @click="activeTab = 'settings'"
                        :class="activeTab === 'settings' ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'"
                        class="px-6 py-3 font-medium transition">
                    ÏÑ§Ï†ï
                </button>
            </div>

            <!-- Ï∂îÏ≤ú Ï¢ÖÎ™© -->
            <div x-show="activeTab === 'recommendations'" class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">Í∏∞Ïà†Ï†Å Î∂ÑÏÑù Í∏∞Î∞ò Ï∂îÏ≤ú</h3>
                        <p class="text-sm text-gray-500 mt-1">
                            <span x-show="analysisMode === 'all'">Ï†ÑÏ≤¥ 235Í∞ú Ï¢ÖÎ™© Î∂ÑÏÑù (ÏïΩ 2~3Î∂Ñ ÏÜåÏöî)</span>
                            <span x-show="analysisMode === 'volume_top100'">Í±∞ÎûòÎüâ ÏÉÅÏúÑ 100Í∞ú Ï¢ÖÎ™© Î∂ÑÏÑù (ÏïΩ 1Î∂Ñ ÏÜåÏöî)</span>
                            <span x-show="analysisMode === 'volume_top50'">Í±∞ÎûòÎüâ ÏÉÅÏúÑ 50Í∞ú Ï¢ÖÎ™© Î∂ÑÏÑù (ÏïΩ 30Ï¥à ÏÜåÏöî)</span>
                        </p>
                    </div>
                    <div class="flex items-center gap-3">
                        <!-- Î™®Îìú ÏÑ†ÌÉù Î≤ÑÌäº -->
                        <div class="flex bg-gray-100 rounded-lg p-1">
                            <button @click="analysisMode = 'all'"
                                    :class="analysisMode === 'all' ? 'bg-white shadow text-blue-600 font-semibold' : 'text-gray-600'"
                                    class="px-3 py-1.5 text-sm rounded transition">
                                Ï†ÑÏ≤¥
                            </button>
                            <button @click="analysisMode = 'volume_top100'"
                                    :class="analysisMode === 'volume_top100' ? 'bg-white shadow text-blue-600 font-semibold' : 'text-gray-600'"
                                    class="px-3 py-1.5 text-sm rounded transition">
                                Top 100
                            </button>
                            <button @click="analysisMode = 'volume_top50'"
                                    :class="analysisMode === 'volume_top50' ? 'bg-white shadow text-blue-600 font-semibold' : 'text-gray-600'"
                                    class="px-3 py-1.5 text-sm rounded transition">
                                Top 50
                            </button>
                        </div>
                        <button @click="loadRecommendationsWithProgress()"
                                :disabled="loading"
                                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400">
                            <i class="fas fa-sync-alt mr-2" :class="{'fa-spin': loading}"></i>
                            <span x-text="loading ? 'Î∂ÑÏÑù Ï§ë...' : 'ÏÉàÎ°úÍ≥†Ïπ®'"></span>
                        </button>
                    </div>
                </div>

                <!-- ÏßÑÌñâÎ•† ÌëúÏãú -->
                <div x-show="loading" class="mb-6">
                    <div class="bg-gray-100 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-700">
                                <span x-text="progressCurrent"></span> / <span x-text="progressTotal"></span> Ï¢ÖÎ™© Î∂ÑÏÑù Ï§ë
                            </span>
                            <span class="text-sm text-gray-600" x-text="progressPercent + '%'"></span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full progress-bar"
                                 :style="'width: ' + progressPercent + '%'"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            ÌòÑÏû¨: <span class="font-medium" x-text="progressMarket"></span>
                        </p>
                    </div>
                </div>

                <!-- Ï∂îÏ≤ú ÌÖåÏù¥Î∏î -->
                <div x-show="!loading && recommendations.length > 0" class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b">
                            <tr>
                                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">ÏàúÏúÑ</th>
                                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Ï¢ÖÎ™©</th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">ÌòÑÏû¨Í∞Ä</th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">Îß§ÏàòÍ∞Ä</th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">Îß§ÎèÑÍ∞Ä</th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">RSI</th>
                                <th class="text-center py-3 px-4 text-sm font-semibold text-gray-700">Ï∂îÏ≤ú</th>
                                <th class="text-center py-3 px-4 text-sm font-semibold text-gray-700">Ï†êÏàò</th>
                                <th class="text-center py-3 px-4 text-sm font-semibold text-gray-700">ÏÉÅÏÑ∏</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="(item, index) in recommendations" :key="item.market">
                                <tr class="border-b hover:bg-gray-50 transition">
                                    <td class="py-3 px-4">
                                        <span class="inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold"
                                              :class="index === 0 ? 'bg-yellow-100 text-yellow-700' : index === 1 ? 'bg-gray-200 text-gray-700' : index === 2 ? 'bg-orange-100 text-orange-700' : 'bg-gray-100 text-gray-600'"
                                              x-text="index + 1"></span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="font-semibold text-gray-900" x-text="item.market"></div>
                                        <div class="text-xs text-gray-500" x-text="item.name"></div>
                                    </td>
                                    <td class="py-3 px-4 text-right font-mono text-sm">
                                        <span x-text="formatPrice(item.current_price)"></span>
                                    </td>
                                    <td class="py-3 px-4 text-right font-mono text-sm">
                                        <span class="text-blue-600 font-semibold" x-text="item.trade_prices ? formatPrice(item.trade_prices.buy_price) : '-'"></span>
                                    </td>
                                    <td class="py-3 px-4 text-right font-mono text-sm">
                                        <div class="flex flex-col items-end">
                                            <span class="text-red-600 font-semibold" x-text="item.trade_prices ? formatPrice(item.trade_prices.sell_price) : '-'"></span>
                                            <span class="text-xs text-green-600" x-text="item.trade_prices ? '+' + item.trade_prices.expected_profit_rate + '%' : ''"></span>
                                        </div>
                                    </td>
                                    <td class="py-3 px-4 text-right">
                                        <span class="text-sm" x-text="item.rsi ? item.rsi.toFixed(1) : '-'"></span>
                                    </td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-block px-2 py-1 text-xs font-medium rounded"
                                              :class="getRecommendationClass(item.recommendation)"
                                              x-text="item.recommendation"></span>
                                    </td>
                                    <td class="py-3 px-4 text-center">
                                        <div class="flex flex-col items-center">
                                            <span class="text-2xl font-bold text-blue-600" x-text="item.score_100"></span>
                                            <span class="text-xs text-gray-500">/100</span>
                                        </div>
                                    </td>
                                    <td class="py-3 px-4 text-center">
                                        <button @click="selectMarket(item.market)"
                                                class="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded transition">
                                            Î∂ÑÏÑù
                                        </button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <div x-show="!loading && recommendations.length === 0" class="text-center py-12">
                    <i class="fas fa-inbox text-4xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§. ÏÉàÎ°úÍ≥†Ïπ®ÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.</p>
                </div>
            </div>

            <!-- Ï†ÑÏ≤¥ Ï¢ÖÎ™© -->
            <div x-show="activeTab === 'all-markets'" class="p-6">
                <div class="mb-4">
                    <input type="text" x-model="searchQuery"
                           placeholder="Ï¢ÖÎ™©Î™Ö ÎòêÎäî ÏΩîÎìú Í≤ÄÏÉâ..."
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b">
                            <tr>
                                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">
                                    <button @click="toggleSort('market')" class="flex items-center hover:text-blue-600 transition">
                                        Ï¢ÖÎ™©
                                        <i class="fas ml-1 text-xs"
                                           :class="{
                                               'fa-sort': sortBy !== 'market',
                                               'fa-sort-up': sortBy === 'market' && sortDirection === 'asc',
                                               'fa-sort-down': sortBy === 'market' && sortDirection === 'desc'
                                           }"></i>
                                    </button>
                                </th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">
                                    <button @click="toggleSort('current_price')" class="flex items-center justify-end w-full hover:text-blue-600 transition">
                                        ÌòÑÏû¨Í∞Ä
                                        <i class="fas ml-1 text-xs"
                                           :class="{
                                               'fa-sort': sortBy !== 'current_price',
                                               'fa-sort-up': sortBy === 'current_price' && sortDirection === 'asc',
                                               'fa-sort-down': sortBy === 'current_price' && sortDirection === 'desc'
                                           }"></i>
                                    </button>
                                </th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">
                                    <button @click="toggleSort('change_rate')" class="flex items-center justify-end w-full hover:text-blue-600 transition">
                                        Î≥ÄÎèôÎ•†
                                        <i class="fas ml-1 text-xs"
                                           :class="{
                                               'fa-sort': sortBy !== 'change_rate',
                                               'fa-sort-up': sortBy === 'change_rate' && sortDirection === 'asc',
                                               'fa-sort-down': sortBy === 'change_rate' && sortDirection === 'desc'
                                           }"></i>
                                    </button>
                                </th>
                                <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700">
                                    <button @click="toggleSort('trade_volume')" class="flex items-center justify-end w-full hover:text-blue-600 transition">
                                        Í±∞ÎûòÎüâ
                                        <i class="fas ml-1 text-xs"
                                           :class="{
                                               'fa-sort': sortBy !== 'trade_volume',
                                               'fa-sort-up': sortBy === 'trade_volume' && sortDirection === 'asc',
                                               'fa-sort-down': sortBy === 'trade_volume' && sortDirection === 'desc'
                                           }"></i>
                                    </button>
                                </th>
                                <th class="text-center py-3 px-4 text-sm font-semibold text-gray-700">Î∂ÑÏÑù</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="market in filteredMarkets" :key="market.market">
                                <tr class="border-b hover:bg-gray-50 transition">
                                    <td class="py-3 px-4">
                                        <div class="font-semibold text-gray-900" x-text="market.market"></div>
                                        <div class="text-xs text-gray-500" x-text="market.korean_name"></div>
                                    </td>
                                    <td class="py-3 px-4 text-right font-mono text-sm" x-text="formatPrice(market.current_price)"></td>
                                    <td class="py-3 px-4 text-right">
                                        <span :class="market.change_rate > 0 ? 'text-red-600' : 'text-blue-600'"
                                              x-text="(market.change_rate > 0 ? '+' : '') + market.change_rate.toFixed(2) + '%'"></span>
                                    </td>
                                    <td class="py-3 px-4 text-right text-sm text-gray-600" x-text="formatVolume(market.trade_volume)"></td>
                                    <td class="py-3 px-4 text-center">
                                        <button @click="selectMarket(market.market)"
                                                class="px-3 py-1 text-sm bg-blue-600 text-white hover:bg-blue-700 rounded transition">
                                            ÏÉÅÏÑ∏
                                        </button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Îâ¥Ïä§ Î∂ÑÏÑù -->
            <div x-show="activeTab === 'news'" class="p-6" x-init="$watch('activeTab', val => val === 'news' && loadNewsSignal())">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">ÏïîÌò∏ÌôîÌèê Îâ¥Ïä§ Í∞êÏ†ï Î∂ÑÏÑù</h3>
                        <p class="text-sm text-gray-500 mt-1">Ïã§ÏãúÍ∞Ñ Îâ¥Ïä§ Í∏∞Î∞ò ÏãúÏû• Ïã¨Î¶¨ Î∂ÑÏÑù</p>
                    </div>
                    <button @click="loadNewsSignal()"
                            :disabled="newsLoading"
                            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400">
                        <i class="fas fa-sync-alt mr-2" :class="{'fa-spin': newsLoading}"></i>
                        <span x-text="newsLoading ? 'Î∂ÑÏÑù Ï§ë...' : 'ÏÉàÎ°úÍ≥†Ïπ®'"></span>
                    </button>
                </div>

                <!-- Îâ¥Ïä§ ÏóÜÏùå -->
                <div x-show="newsSignal && newsSignal.news_count === 0" class="mb-6">
                    <div class="card rounded-lg p-8 text-center">
                        <i class="fas fa-newspaper text-gray-300 text-5xl mb-4"></i>
                        <h4 class="text-lg font-medium text-gray-700 mb-2">Îâ¥Ïä§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§</h4>
                        <p class="text-gray-500 mb-4">ÌòÑÏû¨ ÏïîÌò∏ÌôîÌèê Í¥ÄÎ†® Îâ¥Ïä§Í∞Ä ÏóÜÍ±∞ÎÇò API Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§.</p>
                        <button @click="loadNewsSignal()"
                                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            <i class="fas fa-redo mr-2"></i>Îã§Ïãú ÏãúÎèÑ
                        </button>
                    </div>
                </div>

                <!-- Îâ¥Ïä§ Ïã†Ìò∏ Ïπ¥Îìú -->
                <div x-show="newsSignal && newsSignal.news_count > 0" class="mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <!-- Ïã†Ìò∏ -->
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Îâ¥Ïä§ Ïã†Ìò∏</p>
                            <p class="text-2xl font-bold"
                               :class="{
                                   'text-red-600': newsSignal?.signal === 'BUY',
                                   'text-blue-600': newsSignal?.signal === 'SELL',
                                   'text-gray-600': newsSignal?.signal === 'HOLD'
                               }"
                               x-text="newsSignal?.signal_kr || '-'"></p>
                        </div>
                        <!-- Í∏çÏ†ï ÎπÑÏú® -->
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Í∏çÏ†ï ÎπÑÏú®</p>
                            <p class="text-2xl font-bold"
                               :style="'color: ' + getSentimentTextColor(newsSignal?.positive_ratio)"
                               x-text="newsSignal?.positive_ratio ? (newsSignal.positive_ratio * 100).toFixed(1) + '%' : '-'"></p>
                            <div class="w-full h-2 rounded-full mt-2 bg-gray-200">
                                <div class="h-2 rounded-full transition-all"
                                     :style="'width: ' + (newsSignal?.positive_ratio * 100) + '%; background-color: ' + getSentimentColor(newsSignal?.positive_ratio)"></div>
                            </div>
                        </div>
                        <!-- Ïã†Î¢∞ÎèÑ -->
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Ïã†Î¢∞ÎèÑ</p>
                            <p class="text-2xl font-bold text-blue-600"
                               x-text="newsSignal?.confidence ? (newsSignal.confidence * 100).toFixed(1) + '%' : '-'"></p>
                        </div>
                        <!-- Î∂ÑÏÑù Îâ¥Ïä§ Ïàò -->
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Î∂ÑÏÑùÎêú Îâ¥Ïä§</p>
                            <p class="text-2xl font-bold text-gray-900" x-text="newsSignal?.news_count || 0"></p>
                            <div class="text-xs text-gray-500 mt-1">
                                <span class="text-green-600" x-text="'+' + (newsSignal?.positive_count || 0)"></span> /
                                <span class="text-red-600" x-text="'-' + (newsSignal?.negative_count || 0)"></span> /
                                <span class="text-gray-400" x-text="'=' + (newsSignal?.neutral_count || 0)"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ïã†Ìò∏ Ìï¥ÏÑù -->
                <div x-show="newsSignal && newsSignal.news_count > 0" class="mb-6">
                    <div class="card rounded-lg p-4"
                         :class="{
                             'bg-red-50 border-red-200': newsSignal?.signal === 'BUY',
                             'bg-blue-50 border-blue-200': newsSignal?.signal === 'SELL',
                             'bg-yellow-50 border-yellow-200': newsSignal?.signal === 'HOLD'
                         }">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full flex items-center justify-center mr-4"
                                 :class="{
                                     'bg-red-100': newsSignal?.signal === 'BUY',
                                     'bg-blue-100': newsSignal?.signal === 'SELL',
                                     'bg-yellow-100': newsSignal?.signal === 'HOLD'
                                 }">
                                <i class="fas text-xl"
                                   :class="{
                                       'fa-arrow-trend-up text-red-600': newsSignal?.signal === 'BUY',
                                       'fa-arrow-trend-down text-blue-600': newsSignal?.signal === 'SELL',
                                       'fa-minus text-yellow-600': newsSignal?.signal === 'HOLD'
                                   }"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-900"
                                    x-text="newsSignal?.signal === 'BUY' ? 'ÏãúÏû• Ïã¨Î¶¨ Í∏çÏ†ïÏ†Å' : newsSignal?.signal === 'SELL' ? 'ÏãúÏû• Ïã¨Î¶¨ Î∂ÄÏ†ïÏ†Å' : 'ÏãúÏû• Ïã¨Î¶¨ Ï§ëÎ¶Ω'"></h4>
                                <p class="text-sm text-gray-600"
                                   x-text="newsSignal?.signal === 'BUY' ? 'Í∏çÏ†ïÏ†ÅÏù∏ Îâ¥Ïä§Í∞Ä ÎßéÏïÑ Îß§ÏàòÎ•º Í≥†Î†§Ìï¥Î≥º Ïàò ÏûàÏäµÎãàÎã§.' : newsSignal?.signal === 'SELL' ? 'Î∂ÄÏ†ïÏ†ÅÏù∏ Îâ¥Ïä§Í∞Ä ÎßéÏïÑ Ïã†Ï§ëÌïú Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.' : 'Îâ¥Ïä§ Í∞êÏ†ïÏù¥ ÌòºÌï©ÎêòÏñ¥ ÏûàÏñ¥ Í¥ÄÎßùÏùÑ Í∂åÏû•Ìï©ÎãàÎã§.'"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ï£ºÏöî Îâ¥Ïä§ -->
                <div x-show="newsSignal && newsSignal.news_count > 0 && newsSignal.top_news?.length > 0">
                    <h4 class="font-semibold text-gray-900 mb-4">
                        <i class="fas fa-fire text-orange-500 mr-2"></i>Ï£ºÏöî Îâ¥Ïä§
                    </h4>
                    <div class="space-y-3">
                        <template x-for="(news, index) in newsSignal?.top_news || []" :key="index">
                            <a :href="news.url" target="_blank" rel="noopener noreferrer"
                               class="card rounded-lg p-4 hover:shadow-md transition block cursor-pointer">
                                <div class="flex items-start justify-between">
                                    <div class="flex-1">
                                        <div class="flex items-center mb-2">
                                            <span class="inline-block w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center mr-2"
                                                  :class="{
                                                      'bg-green-100 text-green-700': news.sentiment === 'positive',
                                                      'bg-red-100 text-red-700': news.sentiment === 'negative',
                                                      'bg-gray-100 text-gray-600': news.sentiment === 'neutral'
                                                  }"
                                                  x-text="news.sentiment === 'positive' ? '+' : news.sentiment === 'negative' ? '-' : '='"></span>
                                            <span class="text-xs text-gray-500" x-text="news.source"></span>
                                        </div>
                                        <h5 class="font-medium text-gray-900 mb-1 hover:text-blue-600" x-text="news.title"></h5>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <span>Í∞êÏ†ï Ï†êÏàò: </span>
                                            <span class="ml-1 font-medium"
                                                  :class="{
                                                      'text-green-600': news.polarity > 0,
                                                      'text-red-600': news.polarity < 0,
                                                      'text-gray-600': news.polarity === 0
                                                  }"
                                                  x-text="news.polarity?.toFixed(3) || '0'"></span>
                                        </div>
                                    </div>
                                    <i class="fas fa-external-link-alt text-gray-400 ml-3"></i>
                                </div>
                            </a>
                        </template>
                    </div>
                </div>

                <!-- Î°úÎî© ÏÉÅÌÉú -->
                <div x-show="newsLoading" class="text-center py-12">
                    <div class="inline-block w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
                    <p class="mt-4 text-gray-600">Îâ¥Ïä§ Î∂ÑÏÑù Ï§ë...</p>
                </div>

                <!-- Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå -->
                <div x-show="!newsLoading && !newsSignal" class="text-center py-12">
                    <i class="fas fa-newspaper text-4xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">Îâ¥Ïä§ Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Î†§Î©¥ ÏÉàÎ°úÍ≥†Ïπ®ÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.</p>
                </div>
            </div>

            <!-- ÏûêÎèôÎß§Îß§ -->
            <div x-show="activeTab === 'trading'" class="p-6" x-init="$watch('activeTab', val => { if(val === 'trading') { checkApiConnection(); loadAutoTradingStatus(); loadCoinPreview(); } })">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">AI ÏûêÎèôÎß§Îß§ ÏãúÏä§ÌÖú</h3>
                        <p class="text-sm text-gray-500 mt-1">ÌïôÏäµÎêú AI Î™®Îç∏ Í∏∞Î∞ò ÏûêÎèô Ìä∏Î†àÏù¥Îî©</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="flex items-center space-x-2 px-3 py-1.5 rounded-full text-sm"
                             :class="apiConnected ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'">
                            <div class="w-2 h-2 rounded-full" :class="apiConnected ? 'bg-green-500' : 'bg-red-500'"></div>
                            <span x-text="apiConnected ? 'API Ïó∞Í≤∞Îê®' : 'API ÎØ∏Ïó∞Í≤∞'"></span>
                        </div>
                    </div>
                </div>

                <!-- Î™®Îìú ÌÜ†Í∏Ä -->
                <div x-show="apiConnected" class="mb-6">
                    <div class="flex bg-gray-100 rounded-lg p-1 w-fit">
                        <button @click="tradingMode = 'auto'; loadCoinPreview()"
                                :class="tradingMode === 'auto' ? 'bg-blue-600 text-white shadow' : 'text-gray-600 hover:text-gray-800'"
                                class="px-4 py-2 rounded-lg font-medium transition">
                            <i class="fas fa-magic mr-2"></i>ÏõêÌÅ¥Î¶≠ ÏûêÎèôÎß§Îß§
                        </button>
                        <button @click="tradingMode = 'manual'"
                                :class="tradingMode === 'manual' ? 'bg-blue-600 text-white shadow' : 'text-gray-600 hover:text-gray-800'"
                                class="px-4 py-2 rounded-lg font-medium transition">
                            <i class="fas fa-hand-pointer mr-2"></i>ÏàòÎèô ÏÑ†ÌÉù
                        </button>
                    </div>
                </div>

                <!-- ========== ÏõêÌÅ¥Î¶≠ ÏûêÎèôÎß§Îß§ Ìå®ÎÑê ========== -->
                <div x-show="apiConnected && tradingMode === 'auto'" class="space-y-6">
                    <!-- ÏõêÌÅ¥Î¶≠ ÏãúÏûë Ïπ¥Îìú -->
                    <div class="card rounded-lg p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200">
                        <div class="flex items-center justify-between flex-wrap gap-4">
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">
                                    <i class="fas fa-robot text-blue-600 mr-2"></i>
                                    AI ÏûêÎèô ÏΩîÏù∏ ÏÑ†ÌÉù Îß§Îß§
                                </h3>
                                <p class="text-gray-600 mt-1">
                                    AIÍ∞Ä ÏûêÎèôÏúºÎ°ú ÏÉÅÏúÑ ÏΩîÏù∏ÏùÑ ÏÑ†ÌÉùÌïòÍ≥† Î∂ÑÏÇ∞ Ìà¨ÏûêÌï©ÎãàÎã§
                                </p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <!-- ÏùºÎ∞ò ÏãúÏûë Î≤ÑÌäº -->
                                <button x-show="!autoTradingStatus?.is_running && !autoTradingLoading"
                                        @click="startAutoTrading()"
                                        class="px-8 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700
                                               transition font-bold text-lg shadow-lg">
                                    <i class="fas fa-play mr-2"></i>
                                    <span>ÏõêÌÅ¥Î¶≠ ÏãúÏûë</span>
                                </button>
                                <!-- Î°úÎî© Ï§ë Î≤ÑÌäº (ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î Ìè¨Ìï®) -->
                                <div x-show="!autoTradingStatus?.is_running && autoTradingLoading"
                                     class="relative px-8 py-4 bg-blue-800 text-white rounded-xl font-bold text-lg shadow-lg overflow-hidden min-w-[180px]">
                                    <div class="absolute inset-0 bg-blue-600 animate-loading-bar"></div>
                                    <div class="relative flex items-center justify-center">
                                        <i class="fas fa-robot fa-bounce mr-2"></i>
                                        <span>AI Î∂ÑÏÑùÏ§ë...</span>
                                    </div>
                                </div>
                                <button x-show="autoTradingStatus?.is_running"
                                        @click="stopAutoTrading()"
                                        :disabled="autoTradingLoading"
                                        class="px-8 py-4 bg-red-600 text-white rounded-xl hover:bg-red-700
                                               transition disabled:bg-gray-400 font-bold text-lg shadow-lg">
                                    <i class="fas fa-stop mr-2"></i>
                                    <span x-text="autoTradingLoading ? 'Ï§ëÏßÄ Ï§ë...' : 'ÏûêÎèôÎß§Îß§ Ï§ëÏßÄ'"></span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ÏûêÎèôÎß§Îß§ ÏÑ§Ï†ï -->
                    <div x-show="!autoTradingStatus?.is_running" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="card rounded-lg p-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ï¥ù Ìà¨ÏûêÍ∏àÏï° (KRW)</label>
                                <input type="number" x-model="autoTradingSettings.total_investment"
                                       min="50000" step="50000"
                                       class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                                <p class="text-xs text-gray-500 mt-1">ÏµúÏÜå 50,000Ïõê</p>
                            </div>
                            <div class="card rounded-lg p-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ìà¨Ïûê ÏΩîÏù∏ Ïàò</label>
                                <select x-model="autoTradingSettings.coin_count"
                                        @change="onCoinCountChange()"
                                        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                                    <option value="1">1Í∞ú</option>
                                    <option value="2">2Í∞ú</option>
                                    <option value="3">3Í∞ú</option>
                                    <option value="4">4Í∞ú</option>
                                    <option value="5">5Í∞ú</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">Î∂ÑÏÇ∞ Ìà¨ÏûêÌï† ÏΩîÏù∏ Ïàò</p>
                            </div>
                            <div class="card rounded-lg p-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Î∂ÑÏÑù Î≤îÏúÑ</label>
                                <select x-model="autoTradingSettings.analysis_mode"
                                        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                                    <option value="volume_top50">Top 50 (Îπ†Î¶Ñ)</option>
                                    <option value="volume_top100">Top 100</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">Í±∞ÎûòÎüâ ÏÉÅÏúÑ Í∏∞Ï§Ä</p>
                            </div>
                        </div>

                        <!-- ÏΩîÏù∏ Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ§Ï†ï -->
                        <div class="card rounded-lg p-4">
                            <label class="block text-sm font-medium text-gray-700 mb-3">
                                <i class="fas fa-filter text-blue-500 mr-1"></i>Ìà¨Ïûê ÏΩîÏù∏ Ïπ¥ÌÖåÍ≥†Î¶¨
                            </label>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.coin_category === 'safe' ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.coin_category = 'safe'; loadCoinPreview('safe')">
                                    <input type="radio" name="coin_category" value="safe"
                                           x-model="autoTradingSettings.coin_category" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3">
                                            <i class="fas fa-shield-alt text-green-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">ÏïàÏ†Ñ Ìà¨Ïûê</p>
                                            <p class="text-xs text-gray-500">BTC, ETH Îì± ÏÉÅÏúÑ 6Í∞ú</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.coin_category === 'normal' ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.coin_category = 'normal'; loadCoinPreview('normal')">
                                    <input type="radio" name="coin_category" value="normal"
                                           x-model="autoTradingSettings.coin_category" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                            <i class="fas fa-balance-scale text-blue-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">ÏùºÎ∞ò Ìà¨Ïûê</p>
                                            <p class="text-xs text-gray-500">Î∞àÏΩîÏù∏ Ï†úÏô∏</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.coin_category === 'meme' ? 'border-pink-500 bg-pink-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.coin_category = 'meme'; loadCoinPreview('meme')">
                                    <input type="radio" name="coin_category" value="meme"
                                           x-model="autoTradingSettings.coin_category" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mr-3">
                                            <span class="text-2xl">üêï</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Î∞àÏΩîÏù∏ Ï†ÑÏö©</p>
                                            <p class="text-xs text-gray-500">DOGE, SHIB Îì±</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.coin_category === 'all' ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.coin_category = 'all'; loadCoinPreview('all')">
                                    <input type="radio" name="coin_category" value="all"
                                           x-model="autoTradingSettings.coin_category" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center mr-3">
                                            <i class="fas fa-fire text-orange-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Ï†ÑÏ≤¥</p>
                                            <p class="text-xs text-gray-500">Î™®Îì† ÏΩîÏù∏ Ìè¨Ìï®</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                            <p x-show="autoTradingSettings.coin_category === 'meme' || autoTradingSettings.coin_category === 'all'" class="text-xs text-orange-600 mt-2">
                                <i class="fas fa-exclamation-triangle mr-1"></i>Î∞àÏΩîÏù∏ÏùÄ Î≥ÄÎèôÌè≠Ïù¥ Ïª§ÏÑú Ìà¨Ïûê ÏúÑÌóòÏù¥ ÎÜíÏäµÎãàÎã§.
                            </p>
                        </div>

                        <!-- Ìà¨ÏûêÍ∏à Î∞∞Î∂Ñ Î∞©Ïãù ÏÑ§Ï†ï -->
                        <div class="card rounded-lg p-4">
                            <label class="block text-sm font-medium text-gray-700 mb-3">
                                <i class="fas fa-chart-pie text-indigo-500 mr-1"></i>Ìà¨ÏûêÍ∏à Î∞∞Î∂Ñ Î∞©Ïãù
                            </label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.allocation_mode === 'weighted' ? 'border-indigo-500 bg-indigo-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.allocation_mode = 'weighted'; loadCoinPreview()">
                                    <input type="radio" name="allocation_mode" value="weighted"
                                           x-model="autoTradingSettings.allocation_mode" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center mr-3">
                                            <i class="fas fa-star text-indigo-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Ï†êÏàò Í∏∞Î∞ò Î∞∞Î∂Ñ</p>
                                            <p class="text-xs text-gray-500">Ïú†ÎßùÌïú ÏΩîÏù∏Ïóê Îçî ÎßéÏù¥ Ìà¨Ïûê</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"
                                       :class="autoTradingSettings.allocation_mode === 'equal' ? 'border-indigo-500 bg-indigo-50' : 'border-gray-200 hover:border-gray-300'"
                                       @click="autoTradingSettings.allocation_mode = 'equal'; loadCoinPreview()">
                                    <input type="radio" name="allocation_mode" value="equal"
                                           x-model="autoTradingSettings.allocation_mode" class="hidden">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center mr-3">
                                            <i class="fas fa-equals text-gray-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Í∑†Îì± Î∞∞Î∂Ñ</p>
                                            <p class="text-xs text-gray-500">Î™®Îì† ÏΩîÏù∏Ïóê ÎèôÏùºÌïòÍ≤å Ìà¨Ïûê</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                            <p x-show="autoTradingSettings.allocation_mode === 'weighted'" class="text-xs text-indigo-600 mt-2">
                                <i class="fas fa-lightbulb mr-1"></i>AI Ï†êÏàòÍ∞Ä ÎÜíÏùÄ ÏΩîÏù∏Ïóê Îçî ÎßéÏùÄ Ìà¨ÏûêÍ∏àÏù¥ Î∞∞Î∂ÑÎê©ÎãàÎã§.
                            </p>
                        </div>
                    </div>

                    <!-- Ïã§Ìñâ Ï§ë ÏÉÅÌÉú ÌëúÏãú -->
                    <div x-show="autoTradingStatus?.is_running" class="card rounded-lg p-4 bg-green-50 border border-green-200">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse mr-3"></div>
                                <span class="font-medium text-green-800">ÏûêÎèôÎß§Îß§ Ïã§Ìñâ Ï§ë</span>
                            </div>
                            <div class="text-sm text-green-700">
                                ÏãúÏûë: <span x-text="autoTradingStatus?.start_time ? new Date(autoTradingStatus.start_time).toLocaleString('ko-KR') : '-'"></span>
                            </div>
                        </div>
                    </div>

                    <!-- ÏÑ†ÌÉùÎêú ÏΩîÏù∏ ÌëúÏãú -->
                    <div class="card rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-900">
                                <i class="fas fa-coins text-yellow-500 mr-2"></i>
                                ÏÑ†ÌÉùÎêú ÏΩîÏù∏ (<span x-text="autoTradingStatus?.is_running ? (autoTradingStatus?.selected_coins?.length || 0) : (previewCoins?.length || 0)"></span>Í∞ú)
                            </h4>
                            <span x-show="previewLoading" class="text-sm text-blue-600">
                                <i class="fas fa-spinner fa-spin mr-1"></i>AI Î∂ÑÏÑùÏ§ë...
                            </span>
                        </div>

                        <!-- Î°úÎî© Ï§ë -->
                        <div x-show="previewLoading && !autoTradingStatus?.is_running" class="flex items-center justify-center py-8">
                            <div class="text-center">
                                <i class="fas fa-robot text-4xl text-blue-500 mb-3 animate-bounce"></i>
                                <p class="text-gray-600">AIÍ∞Ä ÏµúÏ†ÅÏùò ÏΩîÏù∏ÏùÑ Î∂ÑÏÑùÌïòÍ≥† ÏûàÏäµÎãàÎã§...</p>
                            </div>
                        </div>

                        <!-- ÎØ∏Î¶¨Î≥¥Í∏∞ ÏΩîÏù∏ (Ïã§Ìñâ Ï†Ñ) -->
                        <div x-show="!previewLoading && !autoTradingStatus?.is_running && previewCoins?.length > 0"
                             class="grid grid-cols-1 md:grid-cols-5 gap-4">
                            <template x-for="coin in previewCoins" :key="coin.market">
                                <div class="p-4 rounded-lg border-2 bg-gray-50 border-gray-200 transition cursor-pointer hover:shadow-lg hover:scale-105 hover:border-blue-300"
                                     @click="openCoinChart(coin)">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <div class="font-bold text-lg" x-text="coin.market.split('-')[1]"></div>
                                            <div class="text-xs text-gray-500" x-text="coin.name"></div>
                                        </div>
                                        <!-- Î∞∞Î∂Ñ ÎπÑÏú® Î±ÉÏßÄ -->
                                        <div class="text-right">
                                            <div class="px-2 py-1 rounded-full text-xs font-bold"
                                                 :class="coin.allocation_percent >= 40 ? 'bg-indigo-500 text-white' : coin.allocation_percent >= 30 ? 'bg-indigo-400 text-white' : 'bg-indigo-100 text-indigo-700'"
                                                 x-text="(coin.allocation_percent || 0).toFixed(0) + '%'"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-sm font-semibold text-gray-800" x-text="'‚Ç©' + formatPrice(coin.current_price)"></div>
                                    <div class="flex justify-between items-center">
                                        <div class="text-sm font-medium"
                                             :class="coin.change_rate >= 0 ? 'text-red-500' : 'text-blue-500'"
                                             x-text="(coin.change_rate >= 0 ? '+' : '') + coin.change_rate?.toFixed(2) + '%'"></div>
                                        <div class="text-xs text-gray-500" x-text="'‚Ç©' + formatPrice(coin.allocated_amount || 0)"></div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Ïã§Ìñâ Ï§ë ÏΩîÏù∏ -->
                        <div x-show="autoTradingStatus?.is_running && autoTradingStatus?.selected_coins?.length > 0"
                             class="grid grid-cols-1 md:grid-cols-5 gap-4">
                            <template x-for="coin in autoTradingStatus?.selected_coins || []" :key="coin.market">
                                <div class="p-4 rounded-lg border-2 transition relative"
                                     :class="autoTradingStatus?.positions?.[coin.market]?.status === 'long'
                                             ? (autoTradingStatus?.positions?.[coin.market]?.unrealized_pnl >= 0
                                                ? 'bg-red-50 border-red-300'
                                                : 'bg-blue-50 border-blue-300')
                                             : autoTradingStatus?.positions?.[coin.market]?.pending_order
                                               ? 'bg-yellow-50 border-yellow-300'
                                               : 'bg-gray-50 border-gray-200'">
                                    <!-- Ï†úÍ±∞ Î≤ÑÌäº -->
                                    <button @click.stop="removeCoinFromPortfolio(coin.market)"
                                            class="absolute top-1 right-1 w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 hover:bg-red-500 hover:text-white text-gray-500 text-xs transition z-10"
                                            title="ÏΩîÏù∏ Ï†úÍ±∞">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <div class="flex justify-between items-start cursor-pointer" @click="openCoinChart(coin)">
                                        <div>
                                            <div class="font-bold text-lg" x-text="coin.market"></div>
                                            <div class="text-sm text-gray-600" x-text="coin.name"></div>
                                        </div>
                                        <!-- Î∞∞Î∂Ñ ÎπÑÏú® Î±ÉÏßÄ -->
                                        <div class="text-right mr-4">
                                            <div class="px-2 py-1 rounded-full text-xs font-bold"
                                                 :class="coin.allocation_percent >= 40 ? 'bg-indigo-500 text-white' : coin.allocation_percent >= 30 ? 'bg-indigo-400 text-white' : 'bg-indigo-100 text-indigo-700'"
                                                 x-text="(coin.allocation_percent || 0).toFixed(0) + '%'"></div>
                                            <div class="text-xs text-gray-500 mt-1" x-text="'‚Ç©' + formatPrice(coin.allocated_amount || 0)"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2 flex items-baseline">
                                        <span class="text-2xl font-bold text-blue-600" x-text="coin.score"></span>
                                        <span class="text-xs text-gray-500 ml-1">/100</span>
                                    </div>
                                    <!-- ÎØ∏Îãà Ï∞®Ìä∏ -->
                                    <div class="mt-2 h-10 bg-white rounded overflow-hidden" x-show="miniCharts[coin.market]?.length > 1">
                                        <svg width="100%" height="100%" viewBox="0 0 120 40" preserveAspectRatio="none">
                                            <path :d="getSparklinePath(coin.market)"
                                                  fill="none"
                                                  :stroke="getSparklineColor(coin.market)"
                                                  stroke-width="2"
                                                  stroke-linecap="round"
                                                  stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                    <div class="mt-2 h-10 bg-gray-100 rounded flex items-center justify-center" x-show="!miniCharts[coin.market] || miniCharts[coin.market]?.length <= 1">
                                        <span class="text-xs text-gray-400">Ï∞®Ìä∏ Î°úÎî©...</span>
                                    </div>
                                    <!-- Ìè¨ÏßÄÏÖò Ï†ïÎ≥¥ (Î≥¥Ïú† Ï§ë) -->
                                    <div x-show="autoTradingStatus?.positions?.[coin.market]?.status === 'long'"
                                         class="mt-2 pt-2 border-t border-gray-200 space-y-1">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">Îß§ÏàòÍ∞Ä</span>
                                            <span class="font-medium" x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.entry_price || 0)"></span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">ÌòÑÏû¨Í∞Ä</span>
                                            <span class="font-medium" x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.current_price || 0)"></span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">ÏàòÎüâ</span>
                                            <span class="font-medium" x-text="(autoTradingStatus?.positions?.[coin.market]?.volume || 0).toFixed(6)"></span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">ÏàòÏùµÎ•†</span>
                                            <span class="font-bold"
                                                  :class="((autoTradingStatus?.positions?.[coin.market]?.current_price - autoTradingStatus?.positions?.[coin.market]?.entry_price) / autoTradingStatus?.positions?.[coin.market]?.entry_price * 100) >= 0 ? 'text-red-600' : 'text-blue-600'"
                                                  x-text="(((autoTradingStatus?.positions?.[coin.market]?.current_price - autoTradingStatus?.positions?.[coin.market]?.entry_price) / autoTradingStatus?.positions?.[coin.market]?.entry_price * 100) >= 0 ? '+' : '') + ((autoTradingStatus?.positions?.[coin.market]?.current_price - autoTradingStatus?.positions?.[coin.market]?.entry_price) / autoTradingStatus?.positions?.[coin.market]?.entry_price * 100).toFixed(2) + '%'"></span>
                                        </div>
                                        <div class="flex justify-between text-xs pt-1 border-t border-gray-100">
                                            <span class="text-gray-500">ÎØ∏Ïã§ÌòÑ ÏÜêÏùµ</span>
                                            <span class="font-bold"
                                                  :class="autoTradingStatus?.positions?.[coin.market]?.unrealized_pnl >= 0 ? 'text-red-600' : 'text-blue-600'"
                                                  x-text="(autoTradingStatus?.positions?.[coin.market]?.unrealized_pnl >= 0 ? '+' : '') + '‚Ç©' + formatPrice(Math.abs(autoTradingStatus?.positions?.[coin.market]?.unrealized_pnl || 0))"></span>
                                        </div>
                                        <!-- AI Î™©Ìëú/ÏÜêÏ†àÍ∞Ä -->
                                        <div class="pt-1 border-t border-gray-100 space-y-1">
                                            <div class="flex justify-between text-xs">
                                                <span class="text-green-600">
                                                    <i class="fas fa-bullseye text-xs"></i> AI Î™©ÌëúÍ∞Ä
                                                </span>
                                                <span class="font-bold text-green-600"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.sell_price || 0)"></span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-red-600">
                                                    <i class="fas fa-exclamation-triangle text-xs"></i> AI ÏÜêÏ†àÍ∞Ä
                                                </span>
                                                <span class="font-bold text-red-600"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.stop_loss || 0)"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Ï£ºÎ¨∏ ÏôÑÎ£å (ÏßÄÏ†ïÍ∞Ä Ï£ºÎ¨∏ Í±∏Î¶∞ ÏÉÅÌÉú) -->
                                    <div x-show="autoTradingStatus?.positions?.[coin.market]?.status !== 'long' && autoTradingStatus?.positions?.[coin.market]?.pending_order"
                                         class="mt-2 pt-2 border-t border-yellow-200 space-y-1">
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs font-bold text-yellow-700">
                                                <i class="fas fa-check-circle mr-1"></i>Ï£ºÎ¨∏ ÏôÑÎ£å
                                            </span>
                                            <button @click.stop="cancelPendingOrder(coin.market)"
                                                    class="px-2 py-0.5 text-xs bg-red-100 hover:bg-red-200 text-red-700 rounded transition">
                                                <i class="fas fa-times mr-1"></i>Ï∑®ÏÜå
                                            </button>
                                        </div>
                                        <!-- Ï£ºÎ¨∏ Ï†ïÎ≥¥ -->
                                        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded p-2 space-y-1">
                                            <div class="flex justify-between text-xs">
                                                <span class="text-yellow-800 font-medium">
                                                    <i class="fas fa-tag text-xs"></i> Ï£ºÎ¨∏ Í∞ÄÍ≤©
                                                </span>
                                                <span class="font-bold text-yellow-900"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.pending_order?.price || 0)"></span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">ÌòÑÏû¨Í∞Ä</span>
                                                <span class="font-medium"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.current_price || 0)"></span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-green-700">
                                                    <i class="fas fa-bullseye text-xs"></i> Î™©ÌëúÍ∞Ä
                                                </span>
                                                <span class="font-medium text-green-700"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.sell_price || 0)"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ÎåÄÍ∏∞ Ï§ë (Ï£ºÎ¨∏ ÏïÑÏßÅ Ïïà Í±∏Î¶º) -->
                                    <div x-show="autoTradingStatus?.positions?.[coin.market]?.status !== 'long' && !autoTradingStatus?.positions?.[coin.market]?.pending_order"
                                         class="mt-2 pt-2 border-t border-gray-200 space-y-1">
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs font-medium text-blue-600">
                                                <i class="fas fa-clock mr-1"></i>Îß§Ïàò ÎåÄÍ∏∞ Ï§ë
                                            </span>
                                            <span class="text-xs text-gray-500">‚Ç©<span x-text="formatPrice(autoTradingStatus?.positions?.[coin.market]?.allocated_amount || 0)"></span></span>
                                        </div>
                                        <!-- AI ÏòàÏÉÅ Í∞ÄÍ≤© -->
                                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded p-2 space-y-1">
                                            <div class="flex justify-between text-xs">
                                                <span class="text-blue-700 font-medium">
                                                    <i class="fas fa-arrow-down text-xs"></i> AI Îß§ÏàòÍ∞Ä
                                                </span>
                                                <span class="font-bold text-blue-800"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.buy_price || 0)"></span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-green-700">
                                                    <i class="fas fa-bullseye text-xs"></i> Î™©ÌëúÍ∞Ä
                                                </span>
                                                <span class="font-medium text-green-700"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.sell_price || 0)"></span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-red-700">
                                                    <i class="fas fa-exclamation-triangle text-xs"></i> ÏÜêÏ†àÍ∞Ä
                                                </span>
                                                <span class="font-medium text-red-700"
                                                      x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[coin.market]?.trade_prices?.stop_loss || 0)"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- ÏΩîÏù∏ ÏóÜÏùå -->
                        <div x-show="!previewLoading && !autoTradingStatus?.is_running && (!previewCoins || previewCoins.length === 0)"
                             class="text-center py-8 text-gray-500">
                            <i class="fas fa-search text-3xl mb-2"></i>
                            <p>ÏÑ†ÌÉùÎêú ÏΩîÏù∏Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                        </div>
                    </div>

                    <!-- Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ ÏöîÏïΩ -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="card rounded-lg p-4">
                            <div class="flex items-center justify-between mb-1">
                                <p class="text-sm text-gray-500" x-text="autoTradingStatus?.is_running ? 'ÏãúÏûë ÏûîÍ≥†' : 'ÌòÑÏû¨ ÏûîÍ≥†'"></p>
                                <button @click="fetchAutoTradingStatus()"
                                        class="w-7 h-7 flex items-center justify-center rounded-full border transition-all duration-200"
                                        :class="balanceRefreshing ? 'bg-blue-500 border-blue-500 text-white' : (balanceRefreshDone ? 'bg-green-500 border-green-500 text-white' : 'bg-gray-100 border-gray-300 text-gray-600 hover:bg-blue-100 hover:border-blue-400 hover:text-blue-600')"
                                        :disabled="balanceRefreshing"
                                        title="ÏûîÍ≥† ÏÉàÎ°úÍ≥†Ïπ®">
                                    <i class="text-xs"
                                       :class="balanceRefreshing ? 'fas fa-sync-alt animate-spin' : (balanceRefreshDone ? 'fas fa-check' : 'fas fa-sync-alt')"></i>
                                </button>
                            </div>
                            <p class="text-xl font-bold"
                               :class="(autoTradingStatus?.start_balance > 0 || autoTradingStatus?.available_balance > 0) ? 'text-gray-900' : 'text-orange-500'"
                               x-text="autoTradingStatus?.start_balance > 0 ? '‚Ç© ' + formatPrice(autoTradingStatus.start_balance) : (autoTradingStatus?.available_balance > 0 ? '‚Ç© ' + formatPrice(autoTradingStatus.available_balance) : 'ÏûîÍ≥†ÏóÜÏùå')"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÌòÑÏû¨ ÌèâÍ∞ÄÏï°</p>
                            <p class="text-xl font-bold"
                               :class="(autoTradingStatus?.current_balance > 0 || autoTradingStatus?.available_balance > 0) ? 'text-gray-900' : 'text-orange-500'"
                               x-text="autoTradingStatus?.current_balance > 0 ? '‚Ç© ' + formatPrice(autoTradingStatus.current_balance) : (autoTradingStatus?.available_balance > 0 ? '‚Ç© ' + formatPrice(autoTradingStatus.available_balance) : 'ÏûîÍ≥†ÏóÜÏùå')"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Ï¥ù ÏÜêÏùµ</p>
                            <p class="text-xl font-bold"
                               :class="(autoTradingStatus?.profit || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                               x-text="autoTradingStatus?.start_balance > 0 ? ((autoTradingStatus.profit >= 0 ? '+' : '') + '‚Ç© ' + formatPrice(Math.abs(autoTradingStatus.profit || 0))) : '-'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÏàòÏùµÎ•†</p>
                            <p class="text-xl font-bold"
                               :class="(autoTradingStatus?.profit_rate || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                               x-text="autoTradingStatus?.start_balance > 0 ? ((autoTradingStatus.profit_rate >= 0 ? '+' : '') + (autoTradingStatus.profit_rate || 0).toFixed(2) + '%') : '-'"></p>
                        </div>
                    </div>

                    <!-- ÏûîÍ≥† ÏóÜÏùå ÏïàÎÇ¥ -->
                    <div x-show="autoTradingStatus?.is_running && autoTradingStatus?.start_balance <= 0 && autoTradingStatus?.available_balance <= 0"
                         class="bg-orange-50 border border-orange-300 rounded-lg p-4">
                        <div class="flex items-center">
                            <i class="fas fa-exclamation-triangle text-orange-500 mr-3 text-xl"></i>
                            <div>
                                <h4 class="font-medium text-orange-800">Í≥ÑÏ¢åÏóê ÏûîÍ≥†Í∞Ä ÏóÜÏäµÎãàÎã§</h4>
                                <p class="text-sm text-orange-700 mt-1">
                                    Ïã§Ï†ú ÏûêÎèôÎß§Îß§Î•º ÏßÑÌñâÌïòÎ†§Î©¥ ÏóÖÎπÑÌä∏ Í≥ÑÏ¢åÏóê KRWÎ•º ÏûÖÍ∏àÌï¥Ï£ºÏÑ∏Ïöî.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Î™©ÌëúÍ∞Ä/ÏÜêÏ†àÍ∞Ä ÏÑ§Ï†ï -->
                    <div class="bg-gradient-to-r from-green-50 to-red-50 border border-gray-200 rounded-xl p-5 mb-4 shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-gray-800 flex items-center">
                                <i class="fas fa-crosshairs text-purple-500 mr-2"></i>
                                ÏûêÎèô Îß§Îß§ Ï°∞Í±¥ ÏÑ§Ï†ï
                            </h4>
                            <div class="flex items-center space-x-3">
                                <!-- ÌòÑÏû¨ ÏÑ§Ï†ïÍ∞í ÎØ∏Î¶¨Î≥¥Í∏∞ (Ï†ëÌòÄÏûàÏùÑ Îïå) -->
                                <div x-show="!showConditionSettings && !autoTradingStatus?.is_running"
                                     class="hidden sm:flex items-center space-x-2 text-sm">
                                    <span class="px-2 py-1 bg-green-100 text-green-700 rounded-full font-medium">
                                        +<span x-text="autoTradingSettings.target_profit_percent"></span>%
                                    </span>
                                    <span class="px-2 py-1 bg-red-100 text-red-700 rounded-full font-medium">
                                        -<span x-text="autoTradingSettings.stop_loss_percent"></span>%
                                    </span>
                                </div>
                                <!-- ÏÑ§Ï†ï Î≤ÑÌäº -->
                                <button x-show="!autoTradingStatus?.is_running"
                                        @click="showConditionSettings = !showConditionSettings"
                                        :class="showConditionSettings ? 'bg-purple-500 text-white' : 'bg-purple-100 text-purple-700 hover:bg-purple-200'"
                                        class="px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2">
                                    <i class="fas" :class="showConditionSettings ? 'fa-chevron-up' : 'fa-cog'"></i>
                                    <span x-text="showConditionSettings ? 'Ï†ëÍ∏∞' : 'ÏÑ§Ï†ï'"></span>
                                </button>
                            </div>
                        </div>

                        <!-- ÏÑ§Ï†ï ÏûÖÎ†• (Ïã§Ìñâ Ï§ë ÏïÑÎãê Îïå + ÏÑ§Ï†ï Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú) -->
                        <div x-show="!autoTradingStatus?.is_running && showConditionSettings"
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform -translate-y-2"
                             x-transition:enter-end="opacity-100 transform translate-y-0"
                             x-transition:leave="transition ease-in duration-150"
                             x-transition:leave-start="opacity-100 transform translate-y-0"
                             x-transition:leave-end="opacity-0 transform -translate-y-2"
                             class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Î™©ÌëúÍ∞Ä ÏÑ§Ï†ï -->
                                <div class="bg-white rounded-xl p-4 border-2 border-green-200 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="font-bold text-green-700 flex items-center">
                                            <i class="fas fa-arrow-trend-up mr-2"></i>Î™©ÌëúÍ∞Ä (ÏùµÏ†à)
                                        </label>
                                        <span class="text-3xl font-black text-green-600">+<span x-text="autoTradingSettings.target_profit_percent"></span>%</span>
                                    </div>
                                    <input type="range"
                                           x-model.number="autoTradingSettings.target_profit_percent"
                                           min="1" max="50" step="1"
                                           class="w-full h-3 bg-green-200 rounded-lg appearance-none cursor-pointer accent-green-500">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>1%</span>
                                        <span>25%</span>
                                        <span>50%</span>
                                    </div>
                                    <div class="mt-3 grid grid-cols-2 md:grid-cols-4 gap-2">
                                        <button @click="autoTradingSettings.target_profit_percent = 5"
                                                :class="autoTradingSettings.target_profit_percent === 5 ? 'bg-green-500 text-white' : 'bg-green-100 text-green-700 hover:bg-green-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">5%</button>
                                        <button @click="autoTradingSettings.target_profit_percent = 10"
                                                :class="autoTradingSettings.target_profit_percent === 10 ? 'bg-green-500 text-white' : 'bg-green-100 text-green-700 hover:bg-green-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">10%</button>
                                        <button @click="autoTradingSettings.target_profit_percent = 20"
                                                :class="autoTradingSettings.target_profit_percent === 20 ? 'bg-green-500 text-white' : 'bg-green-100 text-green-700 hover:bg-green-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">20%</button>
                                        <button @click="autoTradingSettings.target_profit_percent = 30"
                                                :class="autoTradingSettings.target_profit_percent === 30 ? 'bg-green-500 text-white' : 'bg-green-100 text-green-700 hover:bg-green-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">30%</button>
                                    </div>
                                </div>

                                <!-- ÏÜêÏ†àÍ∞Ä ÏÑ§Ï†ï -->
                                <div class="bg-white rounded-xl p-4 border-2 border-red-200 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="font-bold text-red-700 flex items-center">
                                            <i class="fas fa-arrow-trend-down mr-2"></i>ÏÜêÏ†àÍ∞Ä (ÏÜêÏ†à)
                                        </label>
                                        <span class="text-3xl font-black text-red-600">-<span x-text="autoTradingSettings.stop_loss_percent"></span>%</span>
                                    </div>
                                    <input type="range"
                                           x-model.number="autoTradingSettings.stop_loss_percent"
                                           min="1" max="50" step="1"
                                           class="w-full h-3 bg-red-200 rounded-lg appearance-none cursor-pointer accent-red-500">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>1%</span>
                                        <span>25%</span>
                                        <span>50%</span>
                                    </div>
                                    <div class="mt-3 grid grid-cols-2 md:grid-cols-4 gap-2">
                                        <button @click="autoTradingSettings.stop_loss_percent = 3"
                                                :class="autoTradingSettings.stop_loss_percent === 3 ? 'bg-red-500 text-white' : 'bg-red-100 text-red-700 hover:bg-red-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">3%</button>
                                        <button @click="autoTradingSettings.stop_loss_percent = 5"
                                                :class="autoTradingSettings.stop_loss_percent === 5 ? 'bg-red-500 text-white' : 'bg-red-100 text-red-700 hover:bg-red-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">5%</button>
                                        <button @click="autoTradingSettings.stop_loss_percent = 10"
                                                :class="autoTradingSettings.stop_loss_percent === 10 ? 'bg-red-500 text-white' : 'bg-red-100 text-red-700 hover:bg-red-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">10%</button>
                                        <button @click="autoTradingSettings.stop_loss_percent = 20"
                                                :class="autoTradingSettings.stop_loss_percent === 20 ? 'bg-red-500 text-white' : 'bg-red-100 text-red-700 hover:bg-red-200'"
                                                class="px-3 py-2 rounded-full text-sm font-medium transition-all">20%</button>
                                    </div>
                                </div>
                            </div>

                            <!-- ÏÑ§Ï†ï ÌôïÏù∏ Î©îÏãúÏßÄ -->
                            <div class="bg-purple-50 rounded-lg p-3 flex items-center justify-between">
                                <div class="flex items-center text-purple-700">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span class="text-sm">
                                        <strong>+<span x-text="autoTradingSettings.target_profit_percent"></span>%</strong> Ïù¥Ïùµ ÎòêÎäî
                                        <strong>-<span x-text="autoTradingSettings.stop_loss_percent"></span>%</strong> ÏÜêÏã§ Ïãú ÏûêÎèô Îß§ÎèÑ
                                    </span>
                                </div>
                                <span class="text-xs text-purple-500">AI Ïã†Ìò∏Î≥¥Îã§ Ïö∞ÏÑ†</span>
                            </div>
                        </div>

                        <!-- Ï†ëÌòÄÏûàÏùÑ Îïå Í∞ÑÎã®Ìïú ÏöîÏïΩ (Ïã§Ìñâ Ï§ë ÏïÑÎãê Îïå) -->
                        <div x-show="!autoTradingStatus?.is_running && !showConditionSettings"
                             class="flex flex-col sm:flex-row items-center justify-between bg-white rounded-lg p-4 border border-gray-200">
                            <div class="flex items-center space-x-4 mb-3 sm:mb-0">
                                <div class="flex items-center">
                                    <i class="fas fa-arrow-trend-up text-green-500 mr-2"></i>
                                    <span class="text-sm text-gray-600">Î™©ÌëúÍ∞Ä</span>
                                    <span class="ml-2 text-lg font-bold text-green-600">+<span x-text="autoTradingSettings.target_profit_percent"></span>%</span>
                                </div>
                                <div class="w-px h-6 bg-gray-300 hidden sm:block"></div>
                                <div class="flex items-center">
                                    <i class="fas fa-arrow-trend-down text-red-500 mr-2"></i>
                                    <span class="text-sm text-gray-600">ÏÜêÏ†àÍ∞Ä</span>
                                    <span class="ml-2 text-lg font-bold text-red-600">-<span x-text="autoTradingSettings.stop_loss_percent"></span>%</span>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500">
                                <i class="fas fa-info-circle mr-1"></i>
                                ÏúÑ Î≤ÑÌäºÏùÑ ÎàåÎü¨ ÏÑ§Ï†ï Î≥ÄÍ≤Ω
                            </p>
                        </div>

                        <!-- ÌòÑÏû¨ ÏÑ§Ï†ïÍ∞í ÌëúÏãú (Ïã§Ìñâ Ï§ëÏùº Îïå) -->
                        <div x-show="autoTradingStatus?.is_running" class="grid grid-cols-2 gap-4">
                            <div class="bg-white rounded-xl p-4 border-2 border-green-300 text-center shadow-sm">
                                <div class="flex items-center justify-center text-green-600 mb-2">
                                    <i class="fas fa-arrow-trend-up mr-2"></i>
                                    <span class="text-sm font-medium">Î™©ÌëúÍ∞Ä (ÏùµÏ†à)</span>
                                </div>
                                <p class="text-4xl font-black text-green-600">+<span x-text="autoTradingStatus?.target_profit_percent || 10"></span><span class="text-2xl">%</span></p>
                                <p class="text-xs text-gray-500 mt-1">ÎèÑÎã¨ Ïãú ÏûêÎèô Îß§ÎèÑ</p>
                            </div>
                            <div class="bg-white rounded-xl p-4 border-2 border-red-300 text-center shadow-sm">
                                <div class="flex items-center justify-center text-red-600 mb-2">
                                    <i class="fas fa-arrow-trend-down mr-2"></i>
                                    <span class="text-sm font-medium">ÏÜêÏ†àÍ∞Ä (ÏÜêÏ†à)</span>
                                </div>
                                <p class="text-4xl font-black text-red-600">-<span x-text="autoTradingStatus?.stop_loss_percent || 10"></span><span class="text-2xl">%</span></p>
                                <p class="text-xs text-gray-500 mt-1">ÎèÑÎã¨ Ïãú ÏûêÎèô Îß§ÎèÑ</p>
                            </div>
                        </div>
                    </div>

                    <!-- ÏÉÅÌÉú Ï†ÄÏû•/Î≥µÏõê ÏïàÎÇ¥ -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5 shadow-sm">
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-save text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-gray-900 mb-2 flex items-center">
                                    <i class="fas fa-shield-alt text-blue-500 mr-2"></i>
                                    ÏïàÏ†ÑÌïú ÏûêÎèôÎß§Îß§ - ÏÉÅÌÉú ÏûêÎèô Ï†ÄÏû•
                                </h4>
                                <div class="space-y-2 text-sm text-gray-700">
                                    <p class="flex items-start">
                                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                                        <span>Ïª¥Ìì®ÌÑ∞Í∞Ä Í∫ºÏ†∏ÎèÑ Í±±Ï†ï ÏóÜÏñ¥Ïöî! Î™®Îì† Ìè¨ÏßÄÏÖòÍ≥º Í±∞Îûò Ï†ïÎ≥¥Í∞Ä ÏûêÎèôÏúºÎ°ú Ï†ÄÏû•Îê©ÎãàÎã§.</span>
                                    </p>
                                    <p class="flex items-start">
                                        <i class="fas fa-database text-blue-500 mr-2 mt-0.5"></i>
                                        <span><strong>ÏûêÎèô Ï†ÄÏû• ÏãúÏ†ê:</strong> Îß§Ïàò/Îß§ÎèÑ Ïãú, ÏΩîÏù∏ ÍµêÏ≤¥ Ïãú, 60Ï¥àÎßàÎã§ ÏûêÎèô Ï†ÄÏû•</span>
                                    </p>
                                    <p class="flex items-start">
                                        <i class="fas fa-redo text-purple-500 mr-2 mt-0.5"></i>
                                        <span><strong>Î≥µÏõê Î∞©Î≤ï:</strong> ÏÑúÎ≤Ñ Ïû¨ÏãúÏûë ÌõÑ 'ÏûêÎèôÎß§Îß§ ÏãúÏûë'ÏùÑ ÎàÑÎ•¥Î©¥ Ïù¥Ï†Ñ Ìè¨ÏßÄÏÖò Í∑∏ÎåÄÎ°ú Í≥ÑÏÜçÎê©ÎãàÎã§.</span>
                                    </p>
                                    <div class="mt-3 pt-3 border-t border-blue-200">
                                        <p class="text-xs text-gray-600 flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-2"></i>
                                            Ï†ÄÏû• ÏúÑÏπò: <code class="ml-1 px-2 py-0.5 bg-white rounded text-blue-700 font-mono">auto_trading_state.json</code>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Í±∞Îûò ÎÇ¥Ïó≠ -->
                    <div x-show="autoTradingStatus?.trade_history?.length > 0" class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">
                            <i class="fas fa-history text-gray-500 mr-2"></i>Í±∞Îûò ÎÇ¥Ïó≠
                        </h4>
                        <div class="overflow-x-auto max-h-64 overflow-y-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b sticky top-0">
                                    <tr>
                                        <th class="text-left py-2 px-4 text-sm font-semibold text-gray-700">ÏãúÍ∞Ñ</th>
                                        <th class="text-left py-2 px-4 text-sm font-semibold text-gray-700">ÏΩîÏù∏</th>
                                        <th class="text-center py-2 px-4 text-sm font-semibold text-gray-700">Ïï°ÏÖò</th>
                                        <th class="text-right py-2 px-4 text-sm font-semibold text-gray-700">Í∞ÄÍ≤©</th>
                                        <th class="text-right py-2 px-4 text-sm font-semibold text-gray-700">Í∏àÏï°/ÏàòÎüâ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template x-for="(trade, index) in (autoTradingStatus?.trade_history || []).slice().reverse().slice(0, 20)" :key="index">
                                        <tr class="border-b">
                                            <td class="py-2 px-4 text-sm text-gray-600" x-text="formatTradeTime(trade.time)"></td>
                                            <td class="py-2 px-4 text-sm font-medium" x-text="trade.market"></td>
                                            <td class="py-2 px-4 text-center">
                                                <span class="px-2 py-1 rounded text-xs font-medium"
                                                      :class="trade.action?.includes('BUY') ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'"
                                                      x-text="trade.action?.includes('BUY') ? 'Îß§Ïàò' : 'Îß§ÎèÑ'"></span>
                                            </td>
                                            <td class="py-2 px-4 text-right font-mono text-sm" x-text="'‚Ç© ' + formatPrice(trade.price)"></td>
                                            <td class="py-2 px-4 text-right text-sm"
                                                x-text="trade.amount ? '‚Ç© ' + formatPrice(trade.amount) : trade.volume?.toFixed(8)"></td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Ï£ºÏùòÏÇ¨Ìï≠ -->
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-circle text-orange-500 mt-0.5 mr-3"></i>
                            <div>
                                <h4 class="font-medium text-orange-800">Ìà¨Ïûê Ï£ºÏùòÏÇ¨Ìï≠</h4>
                                <ul class="text-sm text-orange-700 mt-1 space-y-1">
                                    <li>- AI ÏûêÎèôÎß§Îß§Îäî ÏÜêÏã§Ïù¥ Î∞úÏÉùÌï† Ïàò ÏûàÏäµÎãàÎã§. Í∞êÎãπ Í∞ÄÎä•Ìïú Í∏àÏï°Îßå Ìà¨ÏûêÌïòÏÑ∏Ïöî.</li>
                                    <li>- Î¶¨Î∞∏Îü∞Ïã± Ïãú Î™®Îì† Ìè¨ÏßÄÏÖòÏù¥ Ï≤≠ÏÇ∞ ÌõÑ ÏÉàÎ°úÏö¥ ÏΩîÏù∏ÏúºÎ°ú Ïû¨Ìà¨ÏûêÎê©ÎãàÎã§.</li>
                                    <li>- ÏûêÎèôÎß§Îß§ Ï§ëÏßÄ Ïãú Î™®Îì† Ìè¨ÏßÄÏÖòÏù¥ Ï¶âÏãú Ï≤≠ÏÇ∞Îê©ÎãàÎã§.</li>
                                    <li>- Ïª¥Ìì®ÌÑ∞Í∞Ä Í∫ºÏßÄÎ©¥ ÏûêÎèôÎß§Îß§Í∞Ä Ï§ëÎã®ÎêòÎ©∞, Î≥¥Ïú† ÏΩîÏù∏ÏùÄ Îß§ÎèÑÎêòÏßÄ ÏïäÍ≥† Í∑∏ÎåÄÎ°ú ÎÇ®ÏäµÎãàÎã§.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- ========== ÏΩîÏù∏ Ï∞®Ìä∏ Î™®Îã¨ ========== -->
                    <div x-show="selectedCoinForChart"
                         x-transition:enter="transition ease-out duration-300"
                         x-transition:enter-start="opacity-0"
                         x-transition:enter-end="opacity-100"
                         x-transition:leave="transition ease-in duration-200"
                         x-transition:leave-start="opacity-100"
                         x-transition:leave-end="opacity-0"
                         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
                         @click.self="closeCoinChart()">
                        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden"
                             x-transition:enter="transition ease-out duration-300"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100">
                            <!-- Î™®Îã¨ Ìó§Îçî -->
                            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div>
                                            <h3 class="text-xl font-bold" x-text="selectedCoinForChart?.market || ''"></h3>
                                            <p class="text-blue-100 text-sm" x-text="selectedCoinForChart?.name || ''"></p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-3 py-1 rounded-full text-sm font-medium"
                                                  :class="selectedCoinForChart?.recommendation?.includes('Îß§Ïàò')
                                                          ? 'bg-red-500 text-white'
                                                          : selectedCoinForChart?.recommendation?.includes('Îß§ÎèÑ')
                                                            ? 'bg-blue-400 text-white'
                                                            : 'bg-gray-200 text-gray-700'"
                                                  x-text="selectedCoinForChart?.recommendation || 'Î∂ÑÏÑùÏ§ë'"></span>
                                            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">
                                                Ï†êÏàò: <span class="font-bold" x-text="selectedCoinForChart?.score || '-'"></span>/100
                                            </span>
                                        </div>
                                    </div>
                                    <button @click="closeCoinChart()"
                                            class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Î™®Îã¨ Î∞îÎîî -->
                            <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 200px);">
                                <!-- ÌòÑÏû¨Í∞Ä Î∞è Ìè¨ÏßÄÏÖò Ï†ïÎ≥¥ -->
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <p class="text-sm text-gray-500">ÌòÑÏû¨Í∞Ä</p>
                                        <p class="text-xl font-bold text-gray-900" x-text="coinChartData?.currentPrice ? '‚Ç© ' + formatPrice(coinChartData.currentPrice) : '-'"></p>
                                    </div>
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <p class="text-sm text-gray-500">24ÏãúÍ∞Ñ Î≥ÄÎèô</p>
                                        <p class="text-xl font-bold"
                                           :class="(coinChartData?.changeRate || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                                           x-text="coinChartData?.changeRate ? ((coinChartData.changeRate >= 0 ? '+' : '') + coinChartData.changeRate.toFixed(2) + '%') : '-'"></p>
                                    </div>
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <p class="text-sm text-gray-500">Ìè¨ÏßÄÏÖò ÏÉÅÌÉú</p>
                                        <p class="text-xl font-bold"
                                           :class="autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.status === 'long' ? 'text-green-600' : 'text-gray-500'"
                                           x-text="autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.status === 'long' ? 'Î≥¥Ïú† Ï§ë' : 'ÎØ∏Î≥¥Ïú†'"></p>
                                    </div>
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <p class="text-sm text-gray-500">ÎØ∏Ïã§ÌòÑ ÏÜêÏùµ</p>
                                        <p class="text-xl font-bold"
                                           :class="(autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.unrealized_pnl || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                                           x-text="autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.unrealized_pnl !== undefined
                                                   ? ((autoTradingStatus.positions[selectedCoinForChart.market].unrealized_pnl >= 0 ? '+' : '') + '‚Ç© ' + formatPrice(Math.abs(autoTradingStatus.positions[selectedCoinForChart.market].unrealized_pnl)))
                                                   : '-'"></p>
                                    </div>
                                </div>

                                <!-- AI ÏòàÏÉÅ Í∞ÄÍ≤© Ï†ïÎ≥¥ -->
                                <div class="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center">
                                        <i class="fas fa-robot text-purple-500 mr-2"></i>
                                        AI ÏòàÏÉÅ Îß§Îß§ Í∞ÄÍ≤©
                                    </h4>
                                    <div class="grid grid-cols-3 gap-4">
                                        <div class="bg-white bg-opacity-70 rounded-lg p-3">
                                            <p class="text-xs text-blue-700 font-medium mb-1">
                                                <i class="fas fa-arrow-down mr-1"></i>AI Îß§ÏàòÍ∞Ä
                                            </p>
                                            <p class="text-lg font-bold text-blue-800"
                                               x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.trade_prices?.buy_price || 0)"></p>
                                            <p class="text-xs text-gray-500 mt-1">ÏµúÏ†Å ÏßÑÏûÖ Í∞ÄÍ≤©</p>
                                        </div>
                                        <div class="bg-white bg-opacity-70 rounded-lg p-3">
                                            <p class="text-xs text-green-700 font-medium mb-1">
                                                <i class="fas fa-bullseye mr-1"></i>Î™©Ìëú Îß§ÎèÑÍ∞Ä
                                            </p>
                                            <p class="text-lg font-bold text-green-700"
                                               x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.trade_prices?.sell_price || 0)"></p>
                                            <p class="text-xs text-gray-500 mt-1">
                                                ÏòàÏÉÅ ÏàòÏùµ: <span class="font-medium text-green-600"
                                                             x-text="'+' + (autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.trade_prices?.expected_profit_rate || 0).toFixed(1) + '%'"></span>
                                            </p>
                                        </div>
                                        <div class="bg-white bg-opacity-70 rounded-lg p-3">
                                            <p class="text-xs text-red-700 font-medium mb-1">
                                                <i class="fas fa-exclamation-triangle mr-1"></i>ÏÜêÏ†àÍ∞Ä
                                            </p>
                                            <p class="text-lg font-bold text-red-700"
                                               x-text="'‚Ç©' + formatPrice(autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.trade_prices?.stop_loss || 0)"></p>
                                            <p class="text-xs text-gray-500 mt-1">
                                                ÏµúÎåÄ ÏÜêÏã§: <span class="font-medium text-red-600"
                                                             x-text="'-' + (autoTradingStatus?.positions?.[selectedCoinForChart?.market]?.trade_prices?.risk_rate || 0).toFixed(1) + '%'"></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Ï∞®Ìä∏ -->
                                <div class="bg-white border rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-4">
                                        <h4 class="font-semibold text-gray-900">
                                            <i class="fas fa-chart-line text-blue-500 mr-2"></i>Ïã§ÏãúÍ∞Ñ Í∞ÄÍ≤© Ï∞®Ìä∏
                                        </h4>
                                        <div class="flex space-x-2">
                                            <button @click="loadCoinChartData(selectedCoinForChart?.market, 30, true)"
                                                    :class="coinChartPeriod === 30 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
                                                    class="px-3 py-1 rounded text-sm transition">30Î∂Ñ</button>
                                            <button @click="loadCoinChartData(selectedCoinForChart?.market, 60, true)"
                                                    :class="coinChartPeriod === 60 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
                                                    class="px-3 py-1 rounded text-sm transition">1ÏãúÍ∞Ñ</button>
                                            <button @click="loadCoinChartData(selectedCoinForChart?.market, 120, true)"
                                                    :class="coinChartPeriod === 120 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
                                                    class="px-3 py-1 rounded text-sm transition">2ÏãúÍ∞Ñ</button>
                                        </div>
                                    </div>
                                    <div x-show="coinChartLoading" class="flex items-center justify-center h-64">
                                        <div class="text-center">
                                            <i class="fas fa-spinner fa-spin text-4xl text-blue-500 mb-2"></i>
                                            <p class="text-gray-500">Ï∞®Ìä∏ Î°úÎî© Ï§ë...</p>
                                        </div>
                                    </div>
                                    <div x-show="!coinChartLoading" id="coin-detail-chart" class="w-full h-64"></div>
                                </div>

                                <!-- Îß§Îß§ Ïù¥Î†• (Ìï¥Îãπ ÏΩîÏù∏Îßå) -->
                                <div x-show="getCoinTradeHistory(selectedCoinForChart?.market).length > 0" class="mt-6">
                                    <h4 class="font-semibold text-gray-900 mb-3">
                                        <i class="fas fa-history text-gray-500 mr-2"></i>Îß§Îß§ Ïù¥Î†•
                                    </h4>
                                    <div class="bg-gray-50 rounded-lg overflow-hidden">
                                        <table class="w-full">
                                            <thead class="bg-gray-100">
                                                <tr>
                                                    <th class="text-left py-2 px-4 text-sm font-medium text-gray-600">ÏãúÍ∞Ñ</th>
                                                    <th class="text-center py-2 px-4 text-sm font-medium text-gray-600">Ïï°ÏÖò</th>
                                                    <th class="text-right py-2 px-4 text-sm font-medium text-gray-600">Í∞ÄÍ≤©</th>
                                                    <th class="text-right py-2 px-4 text-sm font-medium text-gray-600">Í∏àÏï°/ÏàòÎüâ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <template x-for="(trade, idx) in getCoinTradeHistory(selectedCoinForChart?.market).slice(0, 10)" :key="idx">
                                                    <tr class="border-t border-gray-200">
                                                        <td class="py-2 px-4 text-sm text-gray-600" x-text="formatTradeTime(trade.time)"></td>
                                                        <td class="py-2 px-4 text-center">
                                                            <span class="px-2 py-1 rounded text-xs font-medium"
                                                                  :class="trade.action?.includes('BUY') ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'"
                                                                  x-text="trade.action?.includes('BUY') ? 'Îß§Ïàò' : 'Îß§ÎèÑ'"></span>
                                                        </td>
                                                        <td class="py-2 px-4 text-right font-mono text-sm" x-text="'‚Ç© ' + formatPrice(trade.price)"></td>
                                                        <td class="py-2 px-4 text-right text-sm"
                                                            x-text="trade.amount ? '‚Ç© ' + formatPrice(trade.amount) : trade.volume?.toFixed(8)"></td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== ÏàòÎèô ÏÑ†ÌÉù Ìå®ÎÑê (Í∏∞Ï°¥ ÏΩîÎìú) ========== -->
                <div x-show="apiConnected && tradingMode === 'manual'" class="space-y-6">

                <!-- API Ïó∞Í≤∞ ÏïàÎê® Í≤ΩÍ≥† -->
                <div x-show="!apiConnected" class="mb-6">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-yellow-500 mt-0.5 mr-3"></i>
                            <div>
                                <h4 class="font-medium text-yellow-800">API ÌÇ§ ÏÑ§Ï†ï ÌïÑÏöî</h4>
                                <p class="text-sm text-yellow-700 mt-1">
                                    ÏûêÎèôÎß§Îß§Î•º ÏÇ¨Ïö©ÌïòÎ†§Î©¥ <code class="bg-yellow-100 px-1 rounded">.env</code> ÌååÏùºÏóê ÏóÖÎπÑÌä∏ API ÌÇ§Î•º ÏÑ§Ï†ïÌïòÏÑ∏Ïöî.
                                </p>
                                <pre class="text-xs text-yellow-700 mt-2 bg-yellow-100 p-2 rounded">UPBIT_ACCESS_KEY=your_access_key
UPBIT_SECRET_KEY=your_secret_key</pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÏûêÎèôÎß§Îß§ ÏÑ§Ï†ï Î∞è ÏÉÅÌÉú -->
                <div x-show="apiConnected" class="space-y-6">
                    <!-- ÏÑ§Ï†ï Ïπ¥Îìú -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Îß§Îß§ ÏÑ§Ï†ï -->
                        <div class="card rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">
                                <i class="fas fa-cog text-gray-500 mr-2"></i>Îß§Îß§ ÏÑ§Ï†ï
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Í±∞Îûò ÎßàÏºì</label>
                                    <select x-model="tradingSettings.market"
                                            :disabled="tradingStatus?.is_running"
                                            @change="resetChart(); loadChartData()"
                                            class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:bg-gray-100">
                                        <option value="KRW-BTC">KRW-BTC (ÎπÑÌä∏ÏΩîÏù∏)</option>
                                        <option value="KRW-ETH">KRW-ETH (Ïù¥ÎçîÎ¶¨ÏõÄ)</option>
                                        <option value="KRW-XRP">KRW-XRP (Î¶¨Ìîå)</option>
                                        <option value="KRW-SOL">KRW-SOL (ÏÜîÎùºÎÇò)</option>
                                        <option value="KRW-DOGE">KRW-DOGE (ÎèÑÏßÄÏΩîÏù∏)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Í±∞Îûò Ï£ºÍ∏∞ (Ï¥à)</label>
                                    <select x-model="tradingSettings.interval"
                                            :disabled="tradingStatus?.is_running"
                                            class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:bg-gray-100">
                                        <option value="30">30Ï¥à</option>
                                        <option value="60">1Î∂Ñ</option>
                                        <option value="180">3Î∂Ñ</option>
                                        <option value="300">5Î∂Ñ</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ÏµúÎåÄ Í±∞Îûò Í∏àÏï° (KRW)</label>
                                    <input type="number" x-model="tradingSettings.max_trade_amount"
                                           :disabled="tradingStatus?.is_running"
                                           min="5000" step="10000"
                                           class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:bg-gray-100">
                                </div>
                            </div>
                        </div>

                        <!-- ÌòÑÏû¨ ÏÉÅÌÉú -->
                        <div class="card rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">
                                <i class="fas fa-chart-line text-gray-500 mr-2"></i>ÌòÑÏû¨ ÏÉÅÌÉú
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">ÏÉÅÌÉú</span>
                                    <span class="px-2 py-1 rounded text-sm font-medium"
                                          :class="tradingStatus?.is_running ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'"
                                          x-text="tradingStatus?.is_running ? 'Ïã§Ìñâ Ï§ë' : 'Ï§ëÏßÄÎê®'"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">ÌòÑÏû¨ Í∞ÄÍ≤©</span>
                                    <span class="font-mono font-medium" x-text="tradingStatus?.last_price ? '‚Ç© ' + formatPrice(tradingStatus.last_price) : '-'"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Ìè¨ÏßÄÏÖò</span>
                                    <span class="font-medium"
                                          :class="tradingStatus?.current_position === 'long' ? 'text-red-600' : 'text-gray-600'"
                                          x-text="tradingStatus?.current_position || 'ÏóÜÏùå'"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">ÎßàÏßÄÎßâ Ïï°ÏÖò</span>
                                    <span class="font-medium"
                                          :class="{
                                              'text-red-600': tradingStatus?.last_action === 'BUY',
                                              'text-blue-600': tradingStatus?.last_action === 'SELL',
                                              'text-gray-600': tradingStatus?.last_action === 'HOLD'
                                          }"
                                          x-text="tradingStatus?.last_action || '-'"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Í±∞Îûò ÌöüÏàò</span>
                                    <span class="font-medium" x-text="tradingStatus?.trade_count || 0"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÏàòÏùµ ÌòÑÌô© -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÏãúÏûë ÏûîÍ≥†</p>
                            <p class="text-xl font-bold"
                               :class="tradingStatus?.start_balance > 0 ? 'text-gray-900' : 'text-orange-500'"
                               x-text="tradingStatus?.start_balance > 0 ? '‚Ç© ' + formatPrice(tradingStatus.start_balance) : 'ÏûîÍ≥†ÏóÜÏùå'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÌòÑÏû¨ ÏûêÏÇ∞</p>
                            <p class="text-xl font-bold"
                               :class="tradingStatus?.current_balance > 0 ? 'text-gray-900' : 'text-orange-500'"
                               x-text="tradingStatus?.current_balance > 0 ? '‚Ç© ' + formatPrice(tradingStatus.current_balance) : 'ÏûîÍ≥†ÏóÜÏùå'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÏÜêÏùµ</p>
                            <p class="text-xl font-bold"
                               :class="(tradingStatus?.profit || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                               x-text="tradingStatus?.start_balance > 0 ? ((tradingStatus.profit >= 0 ? '+' : '') + '‚Ç© ' + formatPrice(Math.abs(tradingStatus.profit || 0))) : '-'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÏàòÏùµÎ•†</p>
                            <p class="text-xl font-bold"
                               :class="(tradingStatus?.profit_rate || 0) >= 0 ? 'text-red-600' : 'text-blue-600'"
                               x-text="tradingStatus?.start_balance > 0 ? ((tradingStatus.profit_rate >= 0 ? '+' : '') + (tradingStatus.profit_rate || 0).toFixed(2) + '%') : '-'"></p>
                        </div>
                    </div>

                    <!-- Ïã§ÏãúÍ∞Ñ Ï∞®Ìä∏ -->
                    <div class="card rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-900">
                                <i class="fas fa-chart-area text-blue-500 mr-2"></i>Ïã§ÏãúÍ∞Ñ Í∞ÄÍ≤© Ï∞®Ìä∏
                                <span class="text-sm font-normal text-gray-500 ml-2" x-text="tradingSettings.market"></span>
                            </h4>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs text-gray-500">
                                    <span class="inline-block w-3 h-3 bg-red-500 rounded-full mr-1"></span>Îß§Ïàò
                                </span>
                                <span class="text-xs text-gray-500">
                                    <span class="inline-block w-3 h-3 bg-blue-500 rounded-full mr-1"></span>Îß§ÎèÑ
                                </span>
                            </div>
                        </div>
                        <div id="trading-chart" class="w-full" style="height: 350px;"></div>
                    </div>

                    <!-- Ïª®Ìä∏Î°§ Î≤ÑÌäº -->
                    <div class="flex justify-center space-x-4">
                        <button @click="startTrading()"
                                :disabled="tradingStatus?.is_running || tradingLoading"
                                class="px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed font-medium">
                            <i class="fas fa-play mr-2"></i>
                            <span x-text="tradingLoading ? 'Ï≤òÎ¶¨ Ï§ë...' : 'ÏûêÎèôÎß§Îß§ ÏãúÏûë'"></span>
                        </button>
                        <button @click="stopTrading()"
                                :disabled="!tradingStatus?.is_running || tradingLoading"
                                class="px-8 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed font-medium">
                            <i class="fas fa-stop mr-2"></i>
                            <span x-text="tradingLoading ? 'Ï≤òÎ¶¨ Ï§ë...' : 'ÏûêÎèôÎß§Îß§ Ï§ëÏßÄ'"></span>
                        </button>
                    </div>

                    <!-- Í±∞Îûò ÎÇ¥Ïó≠ -->
                    <div class="card rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-900">
                                <i class="fas fa-history text-gray-500 mr-2"></i>Í±∞Îûò ÎÇ¥Ïó≠
                            </h4>
                            <button @click="loadTradingHistory()"
                                    class="text-sm text-blue-600 hover:text-blue-800">
                                <i class="fas fa-sync-alt mr-1"></i>ÏÉàÎ°úÍ≥†Ïπ®
                            </button>
                        </div>

                        <div x-show="tradingHistory.length === 0" class="text-center py-8 text-gray-500">
                            <i class="fas fa-inbox text-3xl mb-2"></i>
                            <p>Í±∞Îûò ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                        </div>

                        <div x-show="tradingHistory.length > 0" class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b">
                                    <tr>
                                        <th class="text-left py-2 px-4 text-sm font-semibold text-gray-700">ÏãúÍ∞Ñ</th>
                                        <th class="text-center py-2 px-4 text-sm font-semibold text-gray-700">Ïï°ÏÖò</th>
                                        <th class="text-right py-2 px-4 text-sm font-semibold text-gray-700">Í∞ÄÍ≤©</th>
                                        <th class="text-right py-2 px-4 text-sm font-semibold text-gray-700">Í∏àÏï°/ÏàòÎüâ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template x-for="(trade, index) in tradingHistory.slice().reverse()" :key="index">
                                        <tr class="border-b">
                                            <td class="py-2 px-4 text-sm text-gray-600" x-text="formatTradeTime(trade.time)"></td>
                                            <td class="py-2 px-4 text-center">
                                                <span class="px-2 py-1 rounded text-xs font-medium"
                                                      :class="trade.action === 'BUY' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'"
                                                      x-text="trade.action === 'BUY' ? 'Îß§Ïàò' : 'Îß§ÎèÑ'"></span>
                                            </td>
                                            <td class="py-2 px-4 text-right font-mono text-sm" x-text="'‚Ç© ' + formatPrice(trade.price)"></td>
                                            <td class="py-2 px-4 text-right text-sm"
                                                x-text="trade.amount ? '‚Ç© ' + formatPrice(trade.amount) : trade.volume?.toFixed(8)"></td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Ï£ºÏùòÏÇ¨Ìï≠ -->
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-circle text-orange-500 mt-0.5 mr-3"></i>
                            <div>
                                <h4 class="font-medium text-orange-800">Ìà¨Ïûê Ï£ºÏùòÏÇ¨Ìï≠</h4>
                                <ul class="text-sm text-orange-700 mt-1 space-y-1">
                                    <li>- ÏûêÎèôÎß§Îß§Îäî AI Î™®Îç∏Ïùò ÏòàÏ∏°ÏùÑ Í∏∞Î∞òÏúºÎ°ú ÌïòÎ©∞, ÏÜêÏã§Ïù¥ Î∞úÏÉùÌï† Ïàò ÏûàÏäµÎãàÎã§.</li>
                                    <li>- Ìà¨Ïûê Í∏àÏï°ÏùÄ Í∞êÎãπ Í∞ÄÎä•Ìïú Î≤îÏúÑ ÎÇ¥ÏóêÏÑú ÏÑ§Ï†ïÌïòÏÑ∏Ïöî.</li>
                                    <li>- ÏãúÏû• ÏÉÅÌô©Ïóê Îî∞Îùº ÏòàÏ∏°Ïù¥ ÌãÄÎ¶¥ Ïàò ÏûàÏúºÎØÄÎ°ú Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú Î™®ÎãàÌÑ∞ÎßÅÌïòÏÑ∏Ïöî.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- LSTM Îã®ÌÉÄ -->
            <div id="lstm-trader-container" x-show="activeTab === 'lstm-trader'" class="p-6" x-init="setTimeout(() => { try { getLstmStatus(); loadLstmModels(); getLstmScalpingStatus(); getUnifiedLstmStatus(); } catch(e) { console.error('LSTM init error', e); } }, 0); $watch('activeTab', val => { if(val === 'lstm-trader'){ setTimeout(()=>{ try{ getLstmStatus(); loadLstmModels(); ensureLstmVisible(); getLstmScalpingStatus(); getUnifiedLstmStatus(); }catch(e){console.error('LSTM activeTab watch error', e);} },0) } }); $watch('lstmSelectedMarket', val => setTimeout(() => { try { loadLstmModels(); getLstmStatus(); } catch(e) { console.error('LSTM market watch error', e); } }, 0))">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">LSTM Îã®ÌÉÄ Ìä∏Î†àÏù¥Îçî</h3>
                        <p class="text-sm text-gray-500 mt-1">ÏõêÌïòÎäî ÏΩîÏù∏ÏúºÎ°ú Î™®Îç∏ÏùÑ ÌïôÏäµÌïòÍ≥† Ï¶âÏãú ÏòàÏ∏° Í≤∞Í≥ºÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.</p>
                    </div>
                </div>
                <!-- Î™®Îç∏ ÏÉÅÌÉú ÏöîÏïΩ Î∞è Í¥ÄÎ¶¨ -->
                <div class="mb-4 p-4 border rounded bg-white shadow">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-brain text-purple-600"></i>
                                <span class="font-medium">Í∞úÎ≥Ñ Î™®Îç∏: <span x-text="lstmModels.length" class="text-blue-600"></span>Í∞ú</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-layer-group text-green-600"></i>
                                <span class="font-medium">ÌÜµÌï© Î™®Îç∏:
                                    <span :class="unifiedLstmStatus?.model_exists ? 'text-green-600' : 'text-gray-400'"
                                          x-text="unifiedLstmStatus?.model_exists ? 'ÏûàÏùå' : 'ÏóÜÏùå'"></span>
                                </span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <button @click="loadLstmModels()" class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200">
                                <i class="fas fa-sync-alt mr-1"></i>ÏÉàÎ°úÍ≥†Ïπ®
                            </button>
                            <button @click="openModelManager()" class="px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700">
                                <i class="fas fa-folder-open mr-1"></i>Î™®Îç∏ Í¥ÄÎ¶¨
                            </button>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div class="card p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="block text-sm font-medium text-gray-700">ÌïôÏäµÌï† ÏΩîÏù∏ ÏÑ†ÌÉù</label>
                            <div class="flex items-center gap-1">
                                <button @click="lstmShowMarketSelector = true" class="text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">
                                    <i class="fas fa-plus mr-1"></i>Ï∂îÍ∞Ä
                                </button>
                                <button @click="selectAllLstmMarkets()" class="text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700" title="Î™®Îì† ÏΩîÏù∏ ÏÑ†ÌÉù">
                                    <i class="fas fa-star mr-1"></i>Ï†ÑÏ≤¥
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÏÑ†ÌÉùÎêú ÏΩîÏù∏ Î™©Î°ù -->
                        <div class="mb-3 flex flex-wrap gap-2">
                            <template x-for="market in lstmSelectedMarkets" :key="market">
                                <div class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">
                                    <span x-text="market"></span>
                                    <button @click="toggleLstmMarket(market)" class="text-blue-500 hover:text-blue-700 font-bold">√ó</button>
                                </div>
                            </template>
                            <div x-show="lstmSelectedMarkets.length === 0" class="text-sm text-gray-500">
                                ÏΩîÏù∏ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700">Ï†ÄÏû•Îêú Î™®Îç∏</label>
                            <div class="flex items-center gap-2 mt-2">
                                <select x-model="lstmSelectedModel" class="flex-1 px-3 py-2 border rounded-lg">
                                    <template x-if="lstmModels.length === 0">
                                        <option value="">(Ï†ÄÏû•Îêú Î™®Îç∏ ÏóÜÏùå)</option>
                                    </template>
                                    <template x-for="m in lstmModels" :key="m.file">
                                        <option :value="m.file" x-text="m.file"></option>
                                    </template>
                                </select>
                                <button :disabled="!lstmSelectedModel" class="px-3 py-2 bg-blue-600 text-white rounded disabled:opacity-40" @click.prevent="loadLstmModel()">Î°úÎìú</button>
                                <button :disabled="!lstmSelectedModel" class="px-3 py-2 bg-red-600 text-white rounded disabled:opacity-40" @click.prevent="deleteLstmModel()">ÏÇ≠Ï†ú</button>
                            </div>
                            <p class="mt-2 text-sm" x-html="lstmLoadedModel ? ('<span class=\'text-green-600\'>Î°úÎìúÎêú Î™®Îç∏: ' + lstmLoadedModel + '</span>') : (lstmModels.length === 0 ? '<span class=\'text-gray-500\'>Ï†ÄÏû•Îêú Î™®Îç∏Ïù¥ ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä ÌïôÏäµÏùÑ Ïã§ÌñâÌïòÏÑ∏Ïöî.</span>' : '<span class=\'text-gray-500\'>Î™®Îç∏Ïù¥ Î°úÎìúÎêòÏñ¥ ÏûàÏßÄ ÏïäÏäµÎãàÎã§.</span>')"></p>
                        </div>
                        <div class="mt-3 grid grid-cols-3 gap-2">
                            <input type="number" x-model.number="lstmEpochs" class="px-2 py-2 border rounded" />
                            <input type="number" x-model.number="lstmBatchSize" class="px-2 py-2 border rounded" />
                            <input type="number" x-model.number="lstmSeqLength" class="px-2 py-2 border rounded" />
                        </div>
                        <div class="mt-2 text-xs text-gray-500">Epochs / Batch / Seq Length</div>
                    </div>

                    <div class="card p-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÌïôÏäµÎ•†</label>
                        <input type="number" x-model.number="lstmLearningRate" step="0.0001" class="w-full px-3 py-2 border rounded-lg" />
                        <div class="mt-3 flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <button @click="startLstmTraining()" class="flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                                    <i class="fas fa-play mr-1"></i>ÌïôÏäµ ÏãúÏûë
                                </button>
                                <button @click="getLstmStatus()" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">
                                    <i class="fas fa-sync-alt mr-1"></i>ÏÉÅÌÉú Í∞±Ïã†
                                </button>
                            </div>
                            <button @click="startAllLstmTraining()" class="w-full px-4 py-3 bg-purple-600 text-white rounded hover:bg-purple-700 font-semibold">
                                <i class="fas fa-rocket mr-2"></i>Ï†ÑÏ≤¥ ÏΩîÏù∏ ÌïôÏäµ ÏãúÏûë
                            </button>
                        </div>
                    </div>

                    <div class="card p-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÌïôÏäµ ÏÉÅÌÉú</label>
                        
                        <!-- Í∞úÎ≥Ñ ÌïôÏäµ ÏÉÅÌÉú -->
                        <div class="mb-4">
                            <div class="text-sm font-medium text-gray-600 mb-1">ÏÑ†ÌÉùÎêú ÏΩîÏù∏</div>
                            <div class="p-2 bg-gray-50 rounded text-sm" x-text="lstmTrainingStatus?.status || 'ÎåÄÍ∏∞ Ï§ë'"></div>
                            <div class="mt-2 text-xs text-gray-500" x-text="lstmTrainingStatus?.message || ''"></div>
                        </div>

                        <!-- Ï†ÑÏ≤¥ ÌïôÏäµ ÌÜµÍ≥Ñ -->
                        <div class="border-t pt-3">
                            <div class="text-sm font-medium text-gray-600 mb-2">Ï†ÑÏ≤¥ ÌïôÏäµ ÌÜµÍ≥Ñ</div>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="p-2 bg-green-50 rounded">
                                    <div class="text-gray-600">ÏßÑÌñâ Ï§ë</div>
                                    <div class="font-bold text-green-600" x-text="lstmAllStatus?.running || 0"></div>
                                </div>
                                <div class="p-2 bg-purple-50 rounded">
                                    <div class="text-gray-600">ÎåÄÍ∏∞ Ï§ë</div>
                                    <div class="font-bold text-purple-600" x-text="lstmAllStatus?.queued || 0"></div>
                                </div>
                                <div class="p-2 bg-blue-50 rounded">
                                    <div class="text-gray-600">ÏôÑÎ£åÎê®</div>
                                    <div class="font-bold text-blue-600" x-text="lstmAllStatus?.completed || 0"></div>
                                </div>
                                <div class="p-2 bg-red-50 rounded">
                                    <div class="text-gray-600">Ïò§Î•ò</div>
                                    <div class="font-bold text-red-600" x-text="lstmAllStatus?.error || 0"></div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3 flex items-center gap-2">
                            <button @click="getLstmPrediction()" class="px-4 py-2 bg-blue-600 text-white rounded text-sm">ÏòàÏ∏° Ïã§Ìñâ</button>
                            <button @click="applyLstmToTrading()" class="px-4 py-2 bg-indigo-600 text-white rounded ml-2">Í±∞Îûò ÌÉ≠ÏúºÎ°ú Ïù¥Îèô</button>
                            <button @click="cancelLstmTraining()" class="px-4 py-2 bg-red-600 text-white rounded ml-2">ÌïôÏäµ Ï∑®ÏÜå</button>
                            <button @click="startLstmLogStream()" class="px-4 py-2 bg-gray-100 rounded ml-2">Î°úÍ∑∏ Î≥¥Í∏∞</button>
                        </div>
                        <div class="mt-3">
                            <div x-show="lstmPrediction">
                                <div>ÏòàÏ∏°Í∞Ä: <span x-text="(lstmPrediction && lstmPrediction.predicted_price) ? '‚Ç© ' + formatPrice(lstmPrediction.predicted_price) : '-'"></span></div>
                                <div>Î≥ÄÌôîÏú®: <span x-text="(lstmPrediction && lstmPrediction.change_rate) ? lstmPrediction.change_rate.toFixed(2) + '%' : '-'"></span></div>
                                <div>Î∞©Ìñ•: <span x-text="(lstmPrediction && lstmPrediction.direction) ? lstmPrediction.direction : '-'"></span></div>
                            </div>

                            <div x-show="lstmLogs && lstmLogs.length > 0" class="mt-3 bg-black text-green-200 p-3 rounded max-h-40 overflow-auto text-xs font-mono">
                                <template x-for="(log, i) in lstmLogs" :key="i">
                                    <div x-text="log"></div>
                                </template>
                                <div class="mt-2">
                                    <button @click="stopLstmLogStream()" class="px-3 py-1 bg-gray-200 rounded text-xs">Î°úÍ∑∏ Îã´Í∏∞</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÌÜµÌï© LSTM Î™®Îç∏ ÏÑπÏÖò -->
                <div class="mt-6 border-t pt-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">
                                <i class="fas fa-brain mr-2 text-purple-600"></i>ÌÜµÌï© LSTM Î™®Îç∏
                            </h3>
                            <p class="text-sm text-gray-500 mt-1">Ïó¨Îü¨ ÏΩîÏù∏Ïùò Ï∞®Ìä∏ Ìå®ÌÑ¥ÏùÑ ÌÜµÌï© ÌïôÏäµÌïòÏó¨ ÌïòÎÇòÏùò Î≤îÏö© Î™®Îç∏ ÏÉùÏÑ±</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 rounded-full text-xs font-medium"
                                  :class="unifiedLstmStatus?.model_exists ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'">
                                <i class="fas fa-check-circle mr-1" x-show="unifiedLstmStatus?.model_exists"></i>
                                <span x-text="unifiedLstmStatus?.model_exists ? 'Î™®Îç∏ ÏûàÏùå' : 'Î™®Îç∏ ÏóÜÏùå'"></span>
                            </span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <!-- ÌÜµÌï© Î™®Îç∏ ÌïôÏäµ -->
                        <div class="card p-4">
                            <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-graduation-cap mr-2"></i>ÌÜµÌï© Î™®Îç∏ ÌïôÏäµ</h4>

                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">ÌïôÏäµ ÏΩîÏù∏ Ïàò</label>
                                    <div class="flex items-center gap-2">
                                        <input type="number" x-model.number="unifiedLstmSettings.min_coins"
                                               min="5" max="50" class="flex-1 px-3 py-2 border rounded text-sm">
                                        <span class="text-xs text-gray-500">ÏµúÏÜå 5Í∞ú</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">ÌïôÏäµ ÏóêÌè≠</label>
                                    <input type="number" x-model.number="unifiedLstmSettings.epochs"
                                           min="10" max="500" class="w-full px-3 py-2 border rounded text-sm">
                                </div>

                                <div class="p-3 bg-purple-50 rounded text-sm">
                                    <div class="font-medium text-purple-800 mb-1">ÌÜµÌï© Î™®Îç∏Ïùò Ïû•Ï†ê</div>
                                    <ul class="text-purple-700 text-xs space-y-1">
                                        <li>‚Ä¢ Îã§ÏñëÌïú ÏΩîÏù∏Ïùò Ìå®ÌÑ¥ÏùÑ Ï¢ÖÌï© ÌïôÏäµ</li>
                                        <li>‚Ä¢ ÏÉàÎ°úÏö¥ ÏΩîÏù∏ÏóêÎèÑ Ï†ÅÏö© Í∞ÄÎä•</li>
                                        <li>‚Ä¢ Í≥ºÏ†ÅÌï©(overfitting) Î∞©ÏßÄ</li>
                                        <li>‚Ä¢ ÌïòÎÇòÏùò Î™®Îç∏Î°ú Î™®Îì† ÏΩîÏù∏ ÏòàÏ∏°</li>
                                    </ul>
                                </div>

                                <button @click="trainUnifiedLstm()"
                                        :disabled="unifiedLstmStatus?.is_training || lstmSelectedMarkets.length < 5"
                                        class="w-full px-4 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition">
                                    <i class="fas fa-brain mr-2"></i>
                                    <span x-text="unifiedLstmStatus?.is_training ? 'ÌïôÏäµ Ï§ë...' : 'ÌÜµÌï© Î™®Îç∏ ÌïôÏäµ ÏãúÏûë'"></span>
                                </button>

                                <div class="text-xs text-gray-500 text-center">
                                    ÏÉÅÎã®ÏóêÏÑú <span x-text="unifiedLstmSettings.min_coins"></span>Í∞ú Ïù¥ÏÉÅ ÏΩîÏù∏ÏùÑ ÏÑ†ÌÉùÌïú ÌõÑ ÌïôÏäµÌïòÏÑ∏Ïöî
                                </div>
                            </div>
                        </div>

                        <!-- ÌïôÏäµ ÏÉÅÌÉú Î∞è ÏòàÏ∏° -->
                        <div class="card p-4">
                            <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-chart-bar mr-2"></i>ÏÉÅÌÉú Î∞è ÏòàÏ∏°</h4>

                            <!-- ÌïôÏäµ ÏßÑÌñâÎ•† -->
                            <div x-show="unifiedLstmStatus?.is_training" class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span>ÌïôÏäµ ÏßÑÌñâÎ•†</span>
                                    <span x-text="unifiedLstmStatus?.current_epoch + '/' + unifiedLstmStatus?.total_epochs"></span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-purple-600 h-3 rounded-full transition-all"
                                         :style="'width: ' + (unifiedLstmStatus?.total_epochs > 0 ? (unifiedLstmStatus?.current_epoch / unifiedLstmStatus?.total_epochs * 100) : 0) + '%'"></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>ÏÜêÏã§: <span x-text="(unifiedLstmStatus?.loss || 0).toFixed(4)"></span></span>
                                    <span>Ï†ïÌôïÎèÑ: <span x-text="((unifiedLstmStatus?.accuracy || 0) * 100).toFixed(1) + '%'"></span></span>
                                </div>
                                <div class="text-xs text-purple-600 mt-2" x-text="unifiedLstmStatus?.message"></div>
                            </div>

                            <!-- ÏòàÏ∏° ÌÖåÏä§Ìä∏ -->
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">ÏòàÏ∏°Ìï† ÏΩîÏù∏</label>
                                    <select x-model="unifiedLstmPredictMarket" class="w-full px-3 py-2 border rounded text-sm">
                                        <option value="KRW-BTC">KRW-BTC (ÎπÑÌä∏ÏΩîÏù∏)</option>
                                        <option value="KRW-ETH">KRW-ETH (Ïù¥ÎçîÎ¶¨ÏõÄ)</option>
                                        <option value="KRW-XRP">KRW-XRP (Î¶¨Ìîå)</option>
                                        <option value="KRW-SOL">KRW-SOL (ÏÜîÎùºÎÇò)</option>
                                        <option value="KRW-DOGE">KRW-DOGE (ÎèÑÏßÄÏΩîÏù∏)</option>
                                        <template x-for="market in lstmSelectedMarkets.filter(m => !['KRW-BTC','KRW-ETH','KRW-XRP','KRW-SOL','KRW-DOGE'].includes(m))" :key="market">
                                            <option :value="market" x-text="market"></option>
                                        </template>
                                    </select>
                                </div>

                                <button @click="predictUnifiedLstm()"
                                        :disabled="!unifiedLstmStatus?.model_exists"
                                        class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition">
                                    <i class="fas fa-magic mr-2"></i>ÏòàÏ∏° Ïã§Ìñâ
                                </button>

                                <!-- ÏòàÏ∏° Í≤∞Í≥º -->
                                <div x-show="unifiedLstmPrediction" class="p-3 bg-gray-50 rounded">
                                    <div class="text-sm font-medium mb-2">
                                        <span x-text="unifiedLstmPredictMarket"></span> ÏòàÏ∏° Í≤∞Í≥º
                                    </div>
                                    <div class="grid grid-cols-2 gap-2 text-sm">
                                        <div>
                                            <div class="text-gray-500 text-xs">Î∞©Ìñ•</div>
                                            <div class="font-bold"
                                                 :class="{
                                                     'text-green-600': unifiedLstmPrediction?.direction_en === 'UP',
                                                     'text-red-600': unifiedLstmPrediction?.direction_en === 'DOWN',
                                                     'text-gray-600': unifiedLstmPrediction?.direction_en === 'NEUTRAL'
                                                 }"
                                                 x-text="unifiedLstmPrediction?.direction"></div>
                                        </div>
                                        <div>
                                            <div class="text-gray-500 text-xs">ÏòàÏÉÅ Î≥ÄÌôîÏú®</div>
                                            <div class="font-bold"
                                                 :class="(unifiedLstmPrediction?.predicted_change_rate || 0) >= 0 ? 'text-green-600' : 'text-red-600'"
                                                 x-text="((unifiedLstmPrediction?.predicted_change_rate || 0) >= 0 ? '+' : '') + (unifiedLstmPrediction?.predicted_change_rate || 0).toFixed(3) + '%'"></div>
                                        </div>
                                        <div>
                                            <div class="text-gray-500 text-xs">ÌòÑÏû¨Í∞Ä</div>
                                            <div x-text="formatPrice(unifiedLstmPrediction?.current_price)"></div>
                                        </div>
                                        <div>
                                            <div class="text-gray-500 text-xs">ÏòàÏ∏°Í∞Ä</div>
                                            <div x-text="formatPrice(unifiedLstmPrediction?.predicted_price)"></div>
                                        </div>
                                        <div class="col-span-2">
                                            <div class="text-gray-500 text-xs">Ïã†Î¢∞ÎèÑ</div>
                                            <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                                <div class="bg-blue-600 h-2 rounded-full"
                                                     :style="'width: ' + ((unifiedLstmPrediction?.confidence || 0) * 100) + '%'"></div>
                                            </div>
                                            <div class="text-xs text-right" x-text="((unifiedLstmPrediction?.confidence || 0) * 100).toFixed(1) + '%'"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LSTM Îã®ÌÉÄ ÏûêÎèôÎß§Îß§ ÏÑπÏÖò -->
                <div class="mt-6 border-t pt-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">LSTM Îã®ÌÉÄ ÏûêÎèôÎß§Îß§</h3>
                            <p class="text-sm text-gray-500 mt-1">ÌïôÏäµÎêú LSTM Î™®Îç∏Í≥º Îã§ÏñëÌïú Îã®ÌÉÄ ÏïåÍ≥†Î¶¨Ï¶òÏùÑ ÌôúÏö©Ìïú ÏûêÎèôÎß§Îß§</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-sm" :class="lstmScalpingStatus?.is_running ? 'text-green-600' : 'text-gray-500'">
                                <i class="fas fa-circle text-xs mr-1"></i>
                                <span x-text="lstmScalpingStatus?.is_running ? 'ÏûêÎèôÎß§Îß§ Ïã§Ìñâ Ï§ë' : 'ÎåÄÍ∏∞ Ï§ë'"></span>
                            </span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4">
                        <!-- Í±∞Îûò ÏÑ§Ï†ï Ìå®ÎÑê -->
                        <div class="card p-4">
                            <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-cog mr-2"></i>Í±∞Îûò ÏÑ§Ï†ï</h4>

                            <div class="space-y-3">
                                <!-- ÌÜµÌï© Î™®Îç∏ ÏÇ¨Ïö© ÌÜ†Í∏Ä -->
                                <div class="flex items-center justify-between p-2 bg-purple-50 rounded">
                                    <div>
                                        <label class="text-sm font-medium text-purple-800">ÌÜµÌï© LSTM Î™®Îç∏ ÏÇ¨Ïö©</label>
                                        <p class="text-xs text-purple-600">Î™®Îì† ÏΩîÏù∏Ïóê Ï†ÅÏö© Í∞ÄÎä•Ìïú ÌÜµÌï© Î™®Îç∏</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="lstmScalpingSettings.use_unified_model" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                    </label>
                                </div>

                                <!-- ÏûêÎèô ÏΩîÏù∏ ÌÉêÏÉâ Î™®Îìú -->
                                <div class="flex items-center justify-between p-2 bg-green-50 rounded" x-show="lstmScalpingSettings.use_unified_model">
                                    <div>
                                        <label class="text-sm font-medium text-green-800">ÏûêÎèô ÏΩîÏù∏ ÌÉêÏÉâ Î™®Îìú</label>
                                        <p class="text-xs text-green-600">AIÍ∞Ä Ïú†ÎßùÌïú ÏΩîÏù∏ÏùÑ ÏûêÎèôÏúºÎ°ú Ï∞æÏïÑ Í±∞Îûò</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="lstmScalpingSettings.auto_discover" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>

                                <!-- ÏûêÎèô ÌÉêÏÉâ ÏÑ§Ï†ï (ÏûêÎèô ÌÉêÏÉâ Î™®ÎìúÏùº ÎïåÎßå ÌëúÏãú) -->
                                <div x-show="lstmScalpingSettings.auto_discover && lstmScalpingSettings.use_unified_model" class="p-3 bg-green-50 rounded-lg border border-green-200">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-xs text-green-700 mb-1">Î™®ÎãàÌÑ∞ÎßÅ ÏΩîÏù∏ Ïàò</label>
                                            <input type="number" x-model.number="lstmScalpingSettings.top_coin_count"
                                                   min="3" max="20" class="w-full px-2 py-1 border border-green-300 rounded text-sm">
                                            <span class="text-xs text-green-600">ÏÉÅÏúÑ NÍ∞ú ÏΩîÏù∏ Î™®ÎãàÌÑ∞ÎßÅ</span>
                                        </div>
                                        <div>
                                            <label class="block text-xs text-green-700 mb-1">ÌÉêÏÉâ Ï£ºÍ∏∞ (Ï¥à)</label>
                                            <input type="number" x-model.number="lstmScalpingSettings.scan_interval"
                                                   min="60" max="600" step="60" class="w-full px-2 py-1 border border-green-300 rounded text-sm">
                                            <span class="text-xs text-green-600">Ï†ÑÏ≤¥ Ïä§Ï∫î Í∞ÑÍ≤©</span>
                                        </div>
                                    </div>
                                    <p class="text-xs text-green-700 mt-2">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Í±∞ÎûòÎüâ, Î≥ÄÎèôÏÑ±, RSI, LSTM Ïã†Ìò∏Î•º Ï¢ÖÌï© Î∂ÑÏÑùÌïòÏó¨ Ïú†Îßù ÏΩîÏù∏ÏùÑ ÏûêÎèô ÏÑ†Ï†ïÌï©ÎãàÎã§.
                                    </p>
                                </div>

                                <!-- Í±∞Îûò ÏΩîÏù∏ ÏÑ†ÌÉù (ÏûêÎèô ÌÉêÏÉâÏù¥ ÏïÑÎãê ÎïåÎßå ÌëúÏãú) -->
                                <div x-show="!lstmScalpingSettings.auto_discover">
                                    <label class="block text-sm text-gray-600 mb-1">Í±∞ÎûòÌï† ÏΩîÏù∏</label>
                                    <div class="flex flex-wrap gap-1 mb-2 max-h-20 overflow-y-auto p-2 bg-gray-50 rounded">
                                        <template x-for="market in lstmScalpingMarkets" :key="market">
                                            <span class="inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs">
                                                <span x-text="market"></span>
                                                <button @click="removeLstmScalpingMarket(market)" class="ml-1 text-blue-500 hover:text-blue-700">√ó</button>
                                            </span>
                                        </template>
                                        <span x-show="lstmScalpingMarkets.length === 0" class="text-xs text-gray-500">ÏΩîÏù∏ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</span>
                                    </div>
                                    <!-- ÌÜµÌï© Î™®Îç∏ ÏÇ¨Ïö© Ïãú: Î™®Îì† ÏΩîÏù∏ ÏÑ†ÌÉù Í∞ÄÎä• -->
                                    <template x-if="lstmScalpingSettings.use_unified_model">
                                        <select @change="addLstmScalpingMarket($event.target.value); $event.target.value=''" class="w-full px-3 py-2 border border-purple-300 rounded text-sm bg-purple-50">
                                            <option value="">+ ÏΩîÏù∏ Ï∂îÍ∞Ä (ÌÜµÌï© Î™®Îç∏ - Î™®Îì† ÏΩîÏù∏)</option>
                                            <template x-for="m in markets" :key="m.market">
                                                <option :value="m.market" x-text="m.market + ' (' + m.korean_name + ')'"></option>
                                            </template>
                                        </select>
                                    </template>
                                    <!-- Í∞úÎ≥Ñ Î™®Îç∏ ÏÇ¨Ïö© Ïãú: ÌïôÏäµÎêú Î™®Îç∏Îßå ÏÑ†ÌÉù Í∞ÄÎä• -->
                                    <template x-if="!lstmScalpingSettings.use_unified_model">
                                        <select @change="addLstmScalpingMarket($event.target.value); $event.target.value=''" class="w-full px-3 py-2 border rounded text-sm">
                                            <option value="">+ ÏΩîÏù∏ Ï∂îÍ∞Ä (ÌïôÏäµÎêú Í∞úÎ≥Ñ Î™®Îç∏Îßå)</option>
                                            <template x-for="m in lstmModels" :key="m.file">
                                                <option :value="m.market" x-text="m.market + ' (' + m.file + ')'"></option>
                                            </template>
                                        </select>
                                    </template>
                                    <p class="text-xs mt-1" :class="lstmScalpingSettings.use_unified_model ? 'text-purple-600' : 'text-gray-500'">
                                        <span x-show="lstmScalpingSettings.use_unified_model">ÌÜµÌï© Î™®Îç∏ ÏÇ¨Ïö©: Î™®Îì† KRW ÎßàÏºì ÏÑ†ÌÉù Í∞ÄÎä•</span>
                                        <span x-show="!lstmScalpingSettings.use_unified_model">Í∞úÎ≥Ñ Î™®Îç∏ ÏÇ¨Ïö©: ÌïôÏäµÎêú ÏΩîÏù∏Îßå ÏÑ†ÌÉù Í∞ÄÎä•</span>
                                    </p>
                                </div>

                                <!-- 1Ìöå Í±∞Îûò Í∏àÏï° -->
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">1Ìöå Í±∞Îûò Í∏àÏï° (KRW)</label>
                                    <input type="number" x-model.number="lstmScalpingSettings.trade_amount"
                                           min="10000" step="10000"
                                           class="w-full px-3 py-2 border rounded text-sm" placeholder="10000">
                                    <span class="text-xs text-gray-500">ÏµúÏÜå 10,000Ïõê</span>
                                </div>

                                <!-- ÏµúÎåÄ Ìè¨ÏßÄÏÖò Ïàò -->
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">ÏµúÎåÄ ÎèôÏãú Ìè¨ÏßÄÏÖò</label>
                                    <input type="number" x-model.number="lstmScalpingSettings.max_positions"
                                           min="1" max="10"
                                           class="w-full px-3 py-2 border rounded text-sm" placeholder="3">
                                </div>

                                <!-- Ï≤¥ÌÅ¨ Í∞ÑÍ≤© -->
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">Ï≤¥ÌÅ¨ Í∞ÑÍ≤© (Ï¥à)</label>
                                    <input type="number" x-model.number="lstmScalpingSettings.check_interval"
                                           min="5" max="300"
                                           class="w-full px-3 py-2 border rounded text-sm" placeholder="30">
                                </div>
                            </div>
                        </div>

                        <!-- Í≥†Í∏â ÏïåÍ≥†Î¶¨Ï¶ò ÏÑ§Ï†ï -->
                        <div class="card p-4">
                            <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-sliders-h mr-2"></i>ÏïåÍ≥†Î¶¨Ï¶ò ÏÑ§Ï†ï</h4>

                            <div class="space-y-3">
                                <!-- LSTM Í∞ÄÏ§ëÏπò Ïä¨ÎùºÏù¥Îçî -->
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">
                                        LSTM Ïã†Ìò∏ Í∞ÄÏ§ëÏπò: <span x-text="(lstmScalpingSettings.lstm_weight * 100).toFixed(0) + '%'"></span>
                                    </label>
                                    <input type="range" x-model.number="lstmScalpingSettings.lstm_weight"
                                           min="0" max="1" step="0.1"
                                           class="w-full">
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Í∏∞Ïà†Ï†Å ÏßÄÌëú</span>
                                        <span>LSTM</span>
                                    </div>
                                </div>

                                <!-- Í∏âÎùΩ Í∞êÏßÄ ÌÜ†Í∏Ä -->
                                <div class="flex items-center justify-between">
                                    <label class="text-sm text-gray-600">Í∏âÎùΩ Í∞êÏßÄ (Ï¶âÏãú Îß§ÎèÑ)</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="lstmScalpingSettings.crash_detection" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"></div>
                                    </label>
                                </div>

                                <!-- Ï∂îÏÑ∏ Î∞òÏ†Ñ Í∞êÏßÄ ÌÜ†Í∏Ä -->
                                <div class="flex items-center justify-between">
                                    <label class="text-sm text-gray-600">Ï∂îÏÑ∏ Î∞òÏ†Ñ Í∞êÏßÄ</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="lstmScalpingSettings.trend_reversal" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div>
                                    </label>
                                </div>

                                <!-- ÎèôÏ†Å ÏÜêÏ†à/ÏùµÏ†à ÌÜ†Í∏Ä -->
                                <div class="flex items-center justify-between">
                                    <label class="text-sm text-gray-600">ÎèôÏ†Å ÏÜêÏ†à/ÏùµÏ†à (ATR)</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="lstmScalpingSettings.dynamic_stops" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                                    </label>
                                </div>

                                <!-- Í∏∞Î≥∏ ÏùµÏ†à/ÏÜêÏ†àÎ•† -->
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-1">ÏùµÏ†àÎ•† (%)</label>
                                        <input type="number" x-model.number="lstmScalpingSettings.take_profit"
                                               min="0.1" max="10" step="0.1"
                                               class="w-full px-2 py-1 border rounded text-sm" placeholder="0.5">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-1">ÏÜêÏ†àÎ•† (%)</label>
                                        <input type="number" x-model.number="lstmScalpingSettings.stop_loss"
                                               min="0.1" max="10" step="0.1"
                                               class="w-full px-2 py-1 border rounded text-sm" placeholder="0.3">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ï†úÏñ¥ Î∞è Ïã§ÏãúÍ∞Ñ ÏÉÅÌÉú -->
                        <div class="card p-4">
                            <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-chart-line mr-2"></i>Ïã§ÏãúÍ∞Ñ ÏÉÅÌÉú</h4>

                            <!-- ÌÜµÍ≥Ñ ÌëúÏãú -->
                            <div class="grid grid-cols-2 gap-2 mb-4">
                                <div class="p-2 bg-green-50 rounded text-center">
                                    <div class="text-xs text-gray-600">ÏäπÎ•†</div>
                                    <div class="text-lg font-bold text-green-600" x-text="(lstmScalpingStatus?.stats?.win_rate || 0).toFixed(1) + '%'"></div>
                                </div>
                                <div class="p-2 bg-blue-50 rounded text-center">
                                    <div class="text-xs text-gray-600">Ï¥ù Í±∞Îûò</div>
                                    <div class="text-lg font-bold text-blue-600" x-text="lstmScalpingStatus?.stats?.total_trades || 0"></div>
                                </div>
                                <div class="p-2 bg-purple-50 rounded text-center">
                                    <div class="text-xs text-gray-600">Ï¥ù ÏàòÏùµ</div>
                                    <div class="text-lg font-bold"
                                         :class="(lstmScalpingStatus?.stats?.total_profit || 0) >= 0 ? 'text-green-600' : 'text-red-600'"
                                         x-text="formatPrice(lstmScalpingStatus?.stats?.total_profit || 0) + ' KRW'"></div>
                                </div>
                                <div class="p-2 bg-orange-50 rounded text-center">
                                    <div class="text-xs text-gray-600">ÌôúÏÑ± Ìè¨ÏßÄÏÖò</div>
                                    <div class="text-lg font-bold text-orange-600" x-text="Object.keys(lstmScalpingStatus?.positions || {}).length"></div>
                                </div>
                            </div>

                            <!-- Ï†úÏñ¥ Î≤ÑÌäº -->
                            <div class="space-y-2">
                                <button @click="startLstmScalping()"
                                        :disabled="lstmScalpingStatus?.is_running || lstmScalpingMarkets.length === 0"
                                        class="w-full px-4 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition">
                                    <i class="fas fa-play mr-2"></i>ÏûêÎèôÎß§Îß§ ÏãúÏûë
                                </button>
                                <button @click="stopLstmScalping()"
                                        :disabled="!lstmScalpingStatus?.is_running"
                                        class="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition">
                                    <i class="fas fa-stop mr-2"></i>ÏûêÎèôÎß§Îß§ Ï§ëÏßÄ
                                </button>
                                <button @click="emergencySellAll()"
                                        :disabled="Object.keys(lstmScalpingStatus?.positions || {}).length === 0"
                                        class="w-full px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed transition">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>Í∏¥Í∏â Ï†ÑÏ≤¥ Îß§ÎèÑ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Ìè¨ÏßÄÏÖò ÌÖåÏù¥Î∏î -->
                    <div class="card p-4" x-show="Object.keys(lstmScalpingStatus?.positions || {}).length > 0">
                        <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-wallet mr-2"></i>ÌòÑÏû¨ Ìè¨ÏßÄÏÖò</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-2 text-left">ÏΩîÏù∏</th>
                                        <th class="px-3 py-2 text-right">ÏßÑÏûÖÍ∞Ä</th>
                                        <th class="px-3 py-2 text-right">ÌòÑÏû¨Í∞Ä</th>
                                        <th class="px-3 py-2 text-right">ÏàòÏùµÎ•†</th>
                                        <th class="px-3 py-2 text-center">LSTM ÏòàÏ∏°</th>
                                        <th class="px-3 py-2 text-center">Î≥¥Ïú†ÏãúÍ∞Ñ</th>
                                        <th class="px-3 py-2 text-center">Ïï°ÏÖò</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template x-for="(pos, market) in lstmScalpingStatus?.positions || {}" :key="market">
                                        <tr class="border-t hover:bg-gray-50">
                                            <td class="px-3 py-2 font-medium" x-text="market"></td>
                                            <td class="px-3 py-2 text-right" x-text="formatPrice(pos.entry_price)"></td>
                                            <td class="px-3 py-2 text-right" x-text="formatPrice(pos.current_price)"></td>
                                            <td class="px-3 py-2 text-right font-bold"
                                                :class="pos.profit_rate >= 0 ? 'text-green-600' : 'text-red-600'"
                                                x-text="(pos.profit_rate >= 0 ? '+' : '') + pos.profit_rate.toFixed(2) + '%'"></td>
                                            <td class="px-3 py-2 text-center">
                                                <span class="px-2 py-1 rounded text-xs"
                                                      :class="{
                                                          'bg-green-100 text-green-700': pos.lstm_signal === 'UP' || pos.lstm_signal === 'STRONG_UP',
                                                          'bg-red-100 text-red-700': pos.lstm_signal === 'DOWN' || pos.lstm_signal === 'STRONG_DOWN',
                                                          'bg-gray-100 text-gray-700': pos.lstm_signal === 'NEUTRAL'
                                                      }"
                                                      x-text="pos.lstm_signal || 'N/A'"></span>
                                            </td>
                                            <td class="px-3 py-2 text-center text-gray-600" x-text="pos.holding_minutes ? pos.holding_minutes.toFixed(0) + 'Î∂Ñ' : '-'"></td>
                                            <td class="px-3 py-2 text-center">
                                                <button @click="emergencySellPosition(market)"
                                                        class="px-2 py-1 bg-red-100 text-red-600 rounded text-xs hover:bg-red-200">
                                                    Îß§ÎèÑ
                                                </button>
                                            </td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅ ÎåÄÏãúÎ≥¥Îìú -->
                    <div class="card p-4 mt-4" x-show="lstmScalpingStatus?.is_running">
                        <h4 class="font-medium text-gray-800 mb-3">
                            <i class="fas fa-satellite-dish mr-2 text-green-500 animate-pulse"></i>Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅ
                            <template x-if="lstmScalpingStatus?.auto_discover">
                                <span class="inline-flex items-center ml-2">
                                    <span class="px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium">
                                        <i class="fas fa-magic mr-1"></i>ÏûêÎèô ÌÉêÏÉâ
                                    </span>
                                    <span class="text-xs text-gray-500 ml-2">
                                        (<span x-text="(lstmScalpingStatus?.markets || []).length"></span>Í∞ú Ïú†Îßù ÏΩîÏù∏ Î™®ÎãàÌÑ∞ÎßÅ)
                                    </span>
                                </span>
                            </template>
                            <template x-if="!lstmScalpingStatus?.auto_discover">
                                <span class="text-xs text-gray-500 ml-2">(<span x-text="lstmScalpingMarkets.length"></span>Í∞ú ÏΩîÏù∏)</span>
                            </template>
                        </h4>

                        <!-- Î™®ÎãàÌÑ∞ÎßÅ ÏΩîÏù∏ Í∑∏Î¶¨Îìú -->
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 mb-4">
                            <template x-for="market in lstmScalpingStatus?.markets || lstmScalpingMarkets" :key="market">
                                <div class="p-2 rounded-lg text-center text-xs border"
                                     :class="{
                                         'bg-green-100 border-green-300': lstmScalpingStatus?.positions?.[market],
                                         'bg-gray-50 border-gray-200': !lstmScalpingStatus?.positions?.[market]
                                     }">
                                    <div class="font-bold" x-text="market.replace('KRW-', '')"></div>
                                    <div x-show="lstmScalpingStatus?.positions?.[market]" class="text-green-600">
                                        <i class="fas fa-shopping-cart"></i> Î≥¥Ïú†Ï§ë
                                    </div>
                                    <div x-show="!lstmScalpingStatus?.positions?.[market]" class="text-gray-400">
                                        <i class="fas fa-eye"></i> Í∞êÏãúÏ§ë
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Ïã§ÏãúÍ∞Ñ Ïã†Ìò∏ Î°úÍ∑∏ -->
                        <div class="border-t pt-3">
                            <h5 class="text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-bolt mr-1 text-yellow-500"></i>Ïã§ÏãúÍ∞Ñ Ïã†Ìò∏ Î°úÍ∑∏
                            </h5>
                            <div class="bg-gray-900 rounded-lg p-3 max-h-48 overflow-y-auto font-mono text-xs" id="signal-log">
                                <template x-for="(log, idx) in (lstmScalpingStatus?.signal_log || []).slice(-30).reverse()" :key="idx">
                                    <div class="py-1 border-b border-gray-700"
                                         :class="{
                                             'text-green-400': log.signal === 'BUY' || log.signal === 'STRONG_BUY',
                                             'text-red-400': log.signal === 'SELL' || log.signal === 'STRONG_SELL' || log.signal === 'EMERGENCY_SELL',
                                             'text-purple-400': log.signal === 'SCAN_COMPLETE',
                                             'text-gray-400': log.signal === 'HOLD'
                                         }">
                                        <span class="text-gray-500" x-text="log.time"></span>
                                        <span class="text-blue-400 ml-2" x-text="'[' + log.market + ']'"></span>
                                        <span class="ml-2" x-text="log.signal"></span>
                                        <template x-if="log.signal !== 'SCAN_COMPLETE'">
                                            <span class="text-yellow-400 ml-2" x-text="'Ïã†Î¢∞ÎèÑ: ' + (log.confidence * 100).toFixed(0) + '%'"></span>
                                        </template>
                                        <span class="text-gray-500 ml-2" x-text="log.reason || ''"></span>
                                    </div>
                                </template>
                                <div x-show="!(lstmScalpingStatus?.signal_log || []).length" class="text-gray-500 text-center py-4">
                                    Ïã†Ìò∏ ÎåÄÍ∏∞ Ï§ë...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÏµúÍ∑º Í±∞Îûò ÎÇ¥Ïó≠ -->
                    <div class="card p-4 mt-4" x-show="(lstmScalpingStatus?.trade_history || []).length > 0">
                        <h4 class="font-medium text-gray-800 mb-3"><i class="fas fa-history mr-2"></i>ÏµúÍ∑º Í±∞Îûò ÎÇ¥Ïó≠</h4>
                        <div class="overflow-x-auto max-h-40 overflow-y-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-50 sticky top-0">
                                    <tr>
                                        <th class="px-3 py-2 text-left">ÏãúÍ∞Ñ</th>
                                        <th class="px-3 py-2 text-left">ÏΩîÏù∏</th>
                                        <th class="px-3 py-2 text-center">ÌÉÄÏûÖ</th>
                                        <th class="px-3 py-2 text-right">Í∞ÄÍ≤©</th>
                                        <th class="px-3 py-2 text-right">ÏàòÏùµÎ•†</th>
                                        <th class="px-3 py-2 text-left">ÏÇ¨Ïú†</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template x-for="(trade, idx) in (lstmScalpingStatus?.trade_history || []).slice(-20).reverse()" :key="idx">
                                        <tr class="border-t">
                                            <td class="px-3 py-2 text-gray-600 text-xs" x-text="trade.time"></td>
                                            <td class="px-3 py-2 font-medium" x-text="trade.market"></td>
                                            <td class="px-3 py-2 text-center">
                                                <span class="px-2 py-1 rounded text-xs"
                                                      :class="trade.type === 'BUY' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'"
                                                      x-text="trade.type"></span>
                                            </td>
                                            <td class="px-3 py-2 text-right" x-text="formatPrice(trade.price)"></td>
                                            <td class="px-3 py-2 text-right"
                                                :class="(trade.profit_rate || 0) >= 0 ? 'text-green-600' : 'text-red-600'"
                                                x-text="trade.profit_rate ? ((trade.profit_rate >= 0 ? '+' : '') + trade.profit_rate.toFixed(2) + '%') : '-'"></td>
                                            <td class="px-3 py-2 text-xs text-gray-600" x-text="trade.reason || '-'"></td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Î™®Îç∏ Í¥ÄÎ¶¨ Î™®Îã¨ -->
            <div x-show="showModelManager"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0"
                 x-transition:enter-end="opacity-100"
                 class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
                 @click.self="showModelManager = false">

                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col"
                     @click.stop>
                    <!-- Ìó§Îçî -->
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-gray-900"><i class="fas fa-folder-open mr-2"></i>Î™®Îç∏ ÌååÏùº Í¥ÄÎ¶¨</h3>
                            <p class="text-sm text-gray-500 mt-1">
                                Ï¥ù <span x-text="modelList.length"></span>Í∞ú Î™®Îç∏,
                                <span x-text="modelTotalSize"></span> MB ÏÇ¨Ïö© Ï§ë
                            </p>
                        </div>
                        <button @click="showModelManager = false" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>

                    <!-- ÎèÑÍµ¨ Î™®Ïùå -->
                    <div class="border-b px-6 py-3 flex items-center justify-between bg-gray-50">
                        <div class="flex items-center gap-2">
                            <button @click="toggleAllModels()" class="text-xs px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                <i class="fas fa-check-double mr-1"></i>Ï†ÑÏ≤¥ ÏÑ†ÌÉù
                            </button>
                            <button @click="deleteSelectedModels()"
                                    :disabled="selectedModels.length === 0"
                                    class="text-xs px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 disabled:opacity-50">
                                <i class="fas fa-trash mr-1"></i>ÏÑ†ÌÉù ÏÇ≠Ï†ú (<span x-text="selectedModels.length"></span>)
                            </button>
                            <button @click="cleanupCheckpoints()" class="text-xs px-3 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200">
                                <i class="fas fa-broom mr-1"></i>Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏ Ï†ïÎ¶¨
                            </button>
                        </div>
                        <button @click="loadModelList()" class="text-xs px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">
                            <i class="fas fa-sync-alt mr-1"></i>ÏÉàÎ°úÍ≥†Ïπ®
                        </button>
                    </div>

                    <!-- Î™®Îç∏ Î™©Î°ù -->
                    <div class="overflow-y-auto flex-1 p-4">
                        <div x-show="modelListLoading" class="text-center py-8 text-gray-500">
                            <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                            <p>Î°úÎî© Ï§ë...</p>
                        </div>

                        <div x-show="!modelListLoading && modelList.length === 0" class="text-center py-8 text-gray-500">
                            <i class="fas fa-folder-open text-4xl mb-3"></i>
                            <p>Ï†ÄÏû•Îêú Î™®Îç∏Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                        </div>

                        <div x-show="!modelListLoading && modelList.length > 0">
                            <!-- ÌÜµÌï© Î™®Îç∏ -->
                            <div x-show="getModelsByType('unified').length > 0" class="mb-6">
                                <h4 class="font-medium text-purple-700 mb-2"><i class="fas fa-layer-group mr-2"></i>ÌÜµÌï© Î™®Îç∏</h4>
                                <div class="space-y-2">
                                    <template x-for="model in getModelsByType('unified')" :key="model.filename">
                                        <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-100">
                                            <div class="flex items-center gap-3">
                                                <input type="checkbox"
                                                       :checked="selectedModels.includes(model.filename)"
                                                       @change="toggleModelSelection(model.filename)"
                                                       class="w-4 h-4 rounded">
                                                <div>
                                                    <div class="font-medium text-gray-800" x-text="model.filename"></div>
                                                    <div class="text-xs text-gray-500">
                                                        <span x-text="model.size_mb + ' MB'"></span> ‚Ä¢
                                                        <span x-text="new Date(model.modified).toLocaleString('ko-KR')"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button @click="deleteModel(model.filename)" class="px-2 py-1 text-red-600 hover:bg-red-100 rounded">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            <!-- Í∞úÎ≥Ñ Î™®Îç∏ (best) -->
                            <div x-show="getModelsByType('best').length > 0" class="mb-6">
                                <h4 class="font-medium text-green-700 mb-2"><i class="fas fa-star mr-2"></i>Best Î™®Îç∏</h4>
                                <div class="space-y-2">
                                    <template x-for="model in getModelsByType('best')" :key="model.filename">
                                        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100">
                                            <div class="flex items-center gap-3">
                                                <input type="checkbox"
                                                       :checked="selectedModels.includes(model.filename)"
                                                       @change="toggleModelSelection(model.filename)"
                                                       class="w-4 h-4 rounded">
                                                <div>
                                                    <div class="font-medium text-gray-800" x-text="model.filename"></div>
                                                    <div class="text-xs text-gray-500">
                                                        <span x-text="model.coin" class="text-green-600 font-medium"></span> ‚Ä¢
                                                        <span x-text="model.size_mb + ' MB'"></span> ‚Ä¢
                                                        <span x-text="new Date(model.modified).toLocaleString('ko-KR')"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button @click="deleteModel(model.filename)" class="px-2 py-1 text-red-600 hover:bg-red-100 rounded">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            <!-- Í∞úÎ≥Ñ Î™®Îç∏ -->
                            <div x-show="getModelsByType('individual').length > 0" class="mb-6">
                                <h4 class="font-medium text-blue-700 mb-2"><i class="fas fa-cube mr-2"></i>Í∞úÎ≥Ñ Î™®Îç∏</h4>
                                <div class="space-y-2">
                                    <template x-for="model in getModelsByType('individual')" :key="model.filename">
                                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100">
                                            <div class="flex items-center gap-3">
                                                <input type="checkbox"
                                                       :checked="selectedModels.includes(model.filename)"
                                                       @change="toggleModelSelection(model.filename)"
                                                       class="w-4 h-4 rounded">
                                                <div>
                                                    <div class="font-medium text-gray-800" x-text="model.filename"></div>
                                                    <div class="text-xs text-gray-500">
                                                        <span x-text="model.coin" class="text-blue-600 font-medium"></span> ‚Ä¢
                                                        <span x-text="model.size_mb + ' MB'"></span> ‚Ä¢
                                                        <span x-text="new Date(model.modified).toLocaleString('ko-KR')"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button @click="deleteModel(model.filename)" class="px-2 py-1 text-red-600 hover:bg-red-100 rounded">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            <!-- Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏ -->
                            <div x-show="getModelsByType('checkpoint').length > 0">
                                <h4 class="font-medium text-gray-600 mb-2">
                                    <i class="fas fa-history mr-2"></i>Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏
                                    <span class="text-xs text-gray-400">(ÏÇ≠Ï†ú Í∂åÏû•)</span>
                                </h4>
                                <div class="space-y-2">
                                    <template x-for="model in getModelsByType('checkpoint')" :key="model.filename">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200">
                                            <div class="flex items-center gap-3">
                                                <input type="checkbox"
                                                       :checked="selectedModels.includes(model.filename)"
                                                       @change="toggleModelSelection(model.filename)"
                                                       class="w-4 h-4 rounded">
                                                <div>
                                                    <div class="text-gray-700" x-text="model.filename"></div>
                                                    <div class="text-xs text-gray-500">
                                                        <span x-text="model.size_mb + ' MB'"></span> ‚Ä¢
                                                        <span x-text="new Date(model.modified).toLocaleString('ko-KR')"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button @click="deleteModel(model.filename)" class="px-2 py-1 text-red-600 hover:bg-red-100 rounded">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÌïòÎã® Î≤ÑÌäº -->
                    <div class="sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex justify-end">
                        <button @click="showModelManager = false"
                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                            Îã´Í∏∞
                        </button>
                    </div>
                </div>
            </div>

            <!-- LSTM ÏΩîÏù∏ ÏÑ†ÌÉù Î™®Îã¨ -->
            <div x-show="lstmShowMarketSelector"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0"
                 x-transition:enter-end="opacity-100"
                 class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
                 @click.self="lstmShowMarketSelector = false">

                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col"
                     @click.stop>
                    <!-- Ìó§Îçî -->
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between">
                        <h3 class="text-lg font-bold text-gray-900">ÌïôÏäµÌï† ÏΩîÏù∏ ÏÑ†ÌÉù</h3>
                        <button @click="lstmShowMarketSelector = false" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>

                    <!-- Í≤ÄÏÉâ Î∞è ÌïÑÌÑ∞ -->
                    <div class="border-b px-6 py-3 space-y-2">
                        <input type="text" 
                               x-model="lstmMarketSearch" 
                               placeholder="ÏΩîÏù∏Î™Ö Í≤ÄÏÉâ (Ïòà: BTC, ETH, ÎπÑÌä∏ÏΩîÏù∏)" 
                               class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <div class="flex items-center gap-2">
                            <button @click="selectAllLstmMarkets()" class="text-xs px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
                                <i class="fas fa-check-double mr-1"></i>Î™®Îëê ÏÑ†ÌÉù
                            </button>
                            <button @click="clearAllLstmMarkets()" class="text-xs px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
                                <i class="fas fa-times mr-1"></i>Î™®Îëê Ìï¥Ï†ú
                            </button>
                            <span class="text-sm text-gray-600 ml-auto">
                                ÏÑ†ÌÉùÎê®: <span class="font-bold" x-text="lstmSelectedMarkets.length"></span>Í∞ú
                            </span>
                        </div>
                    </div>

                    <!-- ÏΩîÏù∏ Î™©Î°ù -->
                    <div class="overflow-y-auto flex-1">
                        <template x-for="market in getFilteredLstmMarkets()" :key="market.market">
                            <div class="flex items-center px-6 py-3 border-b hover:bg-gray-50">
                                <input type="checkbox" 
                                       :id="'lstm-market-' + market.market"
                                       :checked="isLstmMarketSelected(market.market)"
                                       @change="toggleLstmMarket(market.market)"
                                       class="w-4 h-4 text-blue-600 rounded cursor-pointer">
                                <label :for="'lstm-market-' + market.market" class="flex-1 ml-3 cursor-pointer">
                                    <div class="font-medium text-gray-900" x-text="market.market"></div>
                                    <div class="text-sm text-gray-500" x-text="market.korean_name || ''"></div>
                                </label>
                            </div>
                        </template>
                        <div x-show="getFilteredLstmMarkets().length === 0" class="text-center py-8 text-gray-500">
                            <i class="fas fa-search text-2xl mb-2"></i>
                            <p>Í≤ÄÏÉâÎêú ÏΩîÏù∏Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                        </div>
                    </div>

                    <!-- ÌïòÎã® Î≤ÑÌäº -->
                    <div class="sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex justify-between items-center">
                        <span class="text-sm text-gray-600">
                            ÏÑ†ÌÉùÎêú ÏΩîÏù∏: <span class="font-bold" x-text="lstmSelectedMarkets.length"></span>Í∞ú
                        </span>
                        <div class="flex items-center gap-2">
                            <button @click="lstmShowMarketSelector = false" 
                                    class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                                Ï∑®ÏÜå
                            </button>
                            <button @click="lstmShowMarketSelector = false" 
                                    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                                ÌôïÏù∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ÏÑ§Ï†ï -->
            <div x-show="activeTab === 'settings'" class="p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ÏãúÏä§ÌÖú ÏÑ§Ï†ï</h3>

                <div class="space-y-6">
                    <!-- Ï£ºÏöî Ï¢ÖÎ™© ÏÑ§Ï†ï -->
                    <div class="card rounded-lg p-4">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-semibold text-gray-900">Ï£ºÏöî Ï¢ÖÎ™© Ïã§ÏãúÍ∞Ñ ÏãúÏÑ∏ ÏÑ§Ï†ï</h4>
                                <p class="text-sm text-gray-500 mt-1">ÏÉÅÎã®Ïóê ÌëúÏãúÌï† Ï¢ÖÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî (ÏµúÎåÄ 10Í∞ú)</p>
                            </div>
                            <button @click="showMarketSelector = true"
                                    class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                <i class="fas fa-plus mr-2"></i>Ï¢ÖÎ™© Ï∂îÍ∞Ä
                            </button>
                        </div>

                        <!-- ÏÑ†ÌÉùÎêú Ï¢ÖÎ™© Î™©Î°ù -->
                        <div class="space-y-2">
                            <template x-for="(market, index) in watchlistMarkets" :key="market">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <div class="flex items-center">
                                        <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium mr-3"
                                              x-text="index + 1"></span>
                                        <div>
                                            <span class="font-medium text-gray-900" x-text="market"></span>
                                            <span class="text-sm text-gray-500 ml-2" x-text="getMarketName(market)"></span>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button @click="moveWatchlistItem(index, -1)"
                                                :disabled="index === 0"
                                                class="p-1.5 text-gray-400 hover:text-gray-600 disabled:opacity-30">
                                            <i class="fas fa-chevron-up"></i>
                                        </button>
                                        <button @click="moveWatchlistItem(index, 1)"
                                                :disabled="index === watchlistMarkets.length - 1"
                                                class="p-1.5 text-gray-400 hover:text-gray-600 disabled:opacity-30">
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                        <button @click="removeFromWatchlist(market)"
                                                class="p-1.5 text-red-400 hover:text-red-600">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </template>
                            <div x-show="watchlistMarkets.length === 0" class="text-center py-8 text-gray-500">
                                <i class="fas fa-list text-3xl mb-2"></i>
                                <p>ÏÑ†ÌÉùÎêú Ï¢ÖÎ™©Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                            </div>
                        </div>

                        <!-- Í∏∞Î≥∏Í∞í Î≥µÏõê Î≤ÑÌäº -->
                        <div class="mt-4 pt-4 border-t">
                            <button @click="resetWatchlist()"
                                    class="text-sm text-gray-500 hover:text-gray-700">
                                <i class="fas fa-undo mr-1"></i>Í∏∞Î≥∏Í∞íÏúºÎ°ú Î≥µÏõê
                            </button>
                        </div>
                    </div>

                    <div class="card rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-2">AI Î™®Îç∏</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            ÌòÑÏû¨ Í∑úÏπô Í∏∞Î∞ò Î∂ÑÏÑùÏùÑ ÏÇ¨Ïö© Ï§ëÏûÖÎãàÎã§. AI Î™®Îç∏ÏùÑ ÌïôÏäµÌïòÎ©¥ Îçî Ï†ïÌôïÌïú ÏòàÏ∏°Ïù¥ Í∞ÄÎä•Ìï©ÎãàÎã§.
                        </p>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                            <h5 class="font-medium text-blue-900 mb-2">
                                <i class="fas fa-info-circle mr-2"></i>AI Î™®Îç∏ ÌïôÏäµ Î∞©Î≤ï
                            </h5>
                            <ol class="text-sm text-blue-800 space-y-1">
                                <li>1. ÌÑ∞ÎØ∏ÎÑêÏóêÏÑú <code class="bg-blue-100 px-2 py-0.5 rounded">conda activate upbit</code> Ïã§Ìñâ</li>
                                <li>2. <code class="bg-blue-100 px-2 py-0.5 rounded">python main.py</code> Ïã§Ìñâ</li>
                                <li>3. "1Î≤à" ÏÑ†ÌÉùÌïòÏó¨ AI Î™®Îç∏ ÌïôÏäµ</li>
                                <li>4. ÌïôÏäµ ÏôÑÎ£å ÌõÑ ÏõπÏï± Ïû¨ÏãúÏûë</li>
                            </ol>
                        </div>
                    </div>

                    <div class="card rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-2">ÏãúÏä§ÌÖú Ï†ïÎ≥¥</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Î≤ÑÏ†Ñ</span>
                                <span class="font-medium">1.0.0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ÏóÖÎç∞Ïù¥Ìä∏ Ï£ºÍ∏∞</span>
                                <span class="font-medium">3Ï¥à</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Î∂ÑÏÑù ÏßÄÌëú</span>
                                <span class="font-medium">20+Í∞ú</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ÏÉÅÏÑ∏ Î∂ÑÏÑù Î™®Îã¨ -->
    <div x-show="selectedMarket"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
         @click.self="closeModal()">

        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto"
             @click.stop>
            <div class="sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between">
                <div>
                    <h3 class="text-xl font-bold text-gray-900" x-text="selectedMarket"></h3>
                    <p class="text-xs text-gray-500 mt-1">5Ï¥àÎßàÎã§ ÏûêÎèô ÏóÖÎç∞Ïù¥Ìä∏</p>
                </div>
                <button @click="closeModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-6">
                <div x-show="analysisLoading" class="text-center py-12">
                    <div class="inline-block w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
                    <p class="mt-4 text-gray-600">Î∂ÑÏÑù Ï§ë...</p>
                </div>

                <div x-show="!analysisLoading && analysisData" class="space-y-6">
                    <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">ÌòÑÏû¨Í∞Ä</p>
                            <p class="text-2xl font-bold text-gray-900"
                               x-text="analysisData?.technical ? '‚Ç© ' + formatPrice(analysisData.technical.current_price) : '-'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">RSI</p>
                            <p class="text-2xl font-bold text-gray-900"
                               x-text="analysisData?.technical ? analysisData.technical.rsi.toFixed(1) : '-'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Ï†êÏàò</p>
                            <p class="text-2xl font-bold text-blue-600"
                               x-text="analysisData?.technical?.score_100 ? analysisData.technical.score_100 + '/100' : '-'"></p>
                        </div>
                        <div class="card rounded-lg p-4">
                            <p class="text-sm text-gray-500 mb-1">Ï∂îÏ≤ú</p>
                            <p class="text-lg font-bold"
                               :class="getRecommendationTextClass(analysisData?.technical?.recommendation)"
                               x-text="analysisData?.technical ? analysisData.technical.recommendation : '-'"></p>
                        </div>
                    </div>

                    <!-- Îß§Îß§ Ï†ÑÎûµ -->
                    <div x-show="analysisData?.technical?.trade_prices" class="card rounded-lg p-6 bg-blue-50 border-2 border-blue-200">
                        <h4 class="font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-coins text-blue-600 mr-2"></i>
                            Ï∂îÏ≤ú Îß§Îß§ Ï†ÑÎûµ
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white rounded-lg p-4 border-2 border-blue-400">
                                <p class="text-sm text-gray-500 mb-2 flex items-center">
                                    <i class="fas fa-arrow-down text-blue-600 mr-1"></i>
                                    Îß§Ïàò Í∞ÄÍ≤©
                                </p>
                                <p class="text-3xl font-bold text-blue-600 mb-1"
                                   x-text="analysisData?.technical?.trade_prices ? '‚Ç© ' + formatPrice(analysisData.technical.trade_prices.buy_price) : '-'"></p>
                                <p class="text-xs text-gray-600">Î≥ºÎ¶∞Ï†Ä ÌïòÎã® & RSI Í∏∞Ï§Ä</p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border-2 border-red-400">
                                <p class="text-sm text-gray-500 mb-2 flex items-center">
                                    <i class="fas fa-arrow-up text-red-600 mr-1"></i>
                                    Î™©Ìëú Îß§ÎèÑÍ∞Ä
                                </p>
                                <p class="text-3xl font-bold text-red-600 mb-1"
                                   x-text="analysisData?.technical?.trade_prices ? '‚Ç© ' + formatPrice(analysisData.technical.trade_prices.sell_price) : '-'"></p>
                                <p class="text-xs text-green-600 font-semibold"
                                   x-text="analysisData?.technical?.trade_prices ? 'Í∏∞ÎåÄ ÏàòÏùµÎ•†: +' + analysisData.technical.trade_prices.expected_profit_rate + '%' : ''"></p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border-2 border-orange-400">
                                <p class="text-sm text-gray-500 mb-2 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-orange-600 mr-1"></i>
                                    ÏÜêÏ†à Í∞ÄÍ≤©
                                </p>
                                <p class="text-3xl font-bold text-orange-600 mb-1"
                                   x-text="analysisData?.technical?.trade_prices ? '‚Ç© ' + formatPrice(analysisData.technical.trade_prices.stop_loss) : '-'"></p>
                                <p class="text-xs text-orange-600 font-semibold"
                                   x-text="analysisData?.technical?.trade_prices ? 'Î¶¨Ïä§ÌÅ¨: -' + analysisData.technical.trade_prices.risk_rate + '%' : ''"></p>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded">
                            <p class="text-sm text-gray-700">
                                <i class="fas fa-info-circle text-yellow-600 mr-1"></i>
                                <strong>Ìà¨Ïûê Ï†ÑÎûµ:</strong>
                                <span x-text="analysisData?.technical?.trade_prices?.buy_price ?
                                    'Îß§ÏàòÍ∞Ä Í∑ºÏ≤òÏóêÏÑú Î∂ÑÌï† Îß§ÏàòÌïòÍ≥†, Î™©ÌëúÍ∞Ä ÎèÑÎã¨ Ïãú Î∂ÑÌï† Îß§ÎèÑÎ•º Í∂åÏû•Ìï©ÎãàÎã§. ÏÜêÏ†àÍ∞Ä Ïù¥ÌïòÎ°ú ÌïòÎùΩ Ïãú Ï¶âÏãú ÏÜêÏ†àÌïòÏÑ∏Ïöî.' :
                                    'Í∏∞Ïà†Ï†Å Î∂ÑÏÑùÏùÑ Ï∞∏Í≥†ÌïòÏó¨ Ïã†Ï§ëÌûà Ìà¨ÏûêÌïòÏÑ∏Ïöî.'"></span>
                            </p>
                        </div>
                    </div>

                    <!-- Ïã§ÏãúÍ∞Ñ ÏãúÏû• Ï†ïÎ≥¥ -->
                    <div class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">Ïã§ÏãúÍ∞Ñ ÏãúÏû• Ï†ïÎ≥¥</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">ÏãúÍ∞Ä</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.market_info?.opening_price ? '‚Ç© ' + formatPrice(analysisData.market_info.opening_price) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Í≥†Í∞Ä</p>
                                <p class="font-semibold text-red-600"
                                   x-text="analysisData?.market_info?.high_price ? '‚Ç© ' + formatPrice(analysisData.market_info.high_price) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ï†ÄÍ∞Ä</p>
                                <p class="font-semibold text-blue-600"
                                   x-text="analysisData?.market_info?.low_price ? '‚Ç© ' + formatPrice(analysisData.market_info.low_price) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ï†ÑÏùºÏ¢ÖÍ∞Ä</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.market_info?.prev_closing_price ? '‚Ç© ' + formatPrice(analysisData.market_info.prev_closing_price) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">24h Í±∞ÎûòÎåÄÍ∏à</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.market_info?.acc_trade_price_24h ? '‚Ç© ' + formatVolume(analysisData.market_info.acc_trade_price_24h) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">24h Í±∞ÎûòÎüâ</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.market_info?.acc_trade_volume_24h ? formatVolume(analysisData.market_info.acc_trade_volume_24h) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">52Ï£º ÏµúÍ≥†</p>
                                <p class="font-semibold text-red-600"
                                   x-text="analysisData?.market_info?.highest_52_week_price ? '‚Ç© ' + formatPrice(analysisData.market_info.highest_52_week_price) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">52Ï£º ÏµúÏ†Ä</p>
                                <p class="font-semibold text-blue-600"
                                   x-text="analysisData?.market_info?.lowest_52_week_price ? '‚Ç© ' + formatPrice(analysisData.market_info.lowest_52_week_price) : '-'"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Í∏∞Ïà†Ï†Å ÏßÄÌëú ÏÉÅÏÑ∏ -->
                    <div class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">Í∏∞Ïà†Ï†Å ÏßÄÌëú ÏÉÅÏÑ∏</h4>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">SMA 5</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.sma_5 ? '‚Ç© ' + formatPrice(analysisData.technical.sma_5) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">SMA 20</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.sma_20 ? '‚Ç© ' + formatPrice(analysisData.technical.sma_20) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">SMA 60</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.sma_60 ? '‚Ç© ' + formatPrice(analysisData.technical.sma_60) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">MACD</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.macd ? analysisData.technical.macd.toFixed(2) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Signal</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.macd_signal ? analysisData.technical.macd_signal.toFixed(2) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Bollinger ÏÉÅÎã®</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.bb_high ? '‚Ç© ' + formatPrice(analysisData.technical.bb_high) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Bollinger ÌïòÎã®</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.technical?.bb_low ? '‚Ç© ' + formatPrice(analysisData.technical.bb_low) : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">1Ïùº Î≥ÄÎèô</p>
                                <p class="font-semibold"
                                   :class="analysisData?.technical?.price_change_1d > 0 ? 'text-red-600' : 'text-blue-600'"
                                   x-text="analysisData?.technical?.price_change_1d ? (analysisData.technical.price_change_1d > 0 ? '+' : '') + analysisData.technical.price_change_1d.toFixed(2) + '%' : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">7Ïùº Î≥ÄÎèô</p>
                                <p class="font-semibold"
                                   :class="analysisData?.technical?.price_change_7d > 0 ? 'text-red-600' : 'text-blue-600'"
                                   x-text="analysisData?.technical?.price_change_7d ? (analysisData.technical.price_change_7d > 0 ? '+' : '') + analysisData.technical.price_change_7d.toFixed(2) + '%' : '-'"></p>
                            </div>
                        </div>
                    </div>

                    <!-- AI ÏòàÏ∏° -->
                    <div x-show="analysisData?.ai_prediction" class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">AI ÏòàÏ∏° Ï†ïÎ≥¥</h4>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">ÏòàÏ∏°</p>
                                <p class="font-semibold text-gray-900" x-text="analysisData?.ai_prediction?.direction || '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ïã†Î¢∞ÎèÑ</p>
                                <p class="font-semibold text-gray-900"
                                   x-text="analysisData?.ai_prediction ? (analysisData.ai_prediction.confidence * 100).toFixed(1) + '%' : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ïï°ÏÖò</p>
                                <p class="font-semibold text-gray-900" x-text="analysisData?.ai_prediction?.action_text || '-'"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Îâ¥Ïä§ Í∞êÏ†ï Î∂ÑÏÑù -->
                    <div x-show="analysisData?.news_signal" class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">
                            <i class="fas fa-newspaper text-blue-500 mr-2"></i>Îâ¥Ïä§ Í∞êÏ†ï Î∂ÑÏÑù
                        </h4>

                        <!-- Îâ¥Ïä§ ÏóÜÏùå -->
                        <div x-show="analysisData?.news_signal?.news_count === 0" class="text-center py-6">
                            <i class="fas fa-newspaper text-gray-300 text-4xl mb-3"></i>
                            <p class="text-gray-500 mb-2">Ìï¥Îãπ ÏΩîÏù∏Ïùò Îâ¥Ïä§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§</p>
                            <p class="text-xs text-gray-400">ÏòÅÎ¨∏ Îâ¥Ïä§Îßå ÏßÄÏõêÎê©ÎãàÎã§</p>
                        </div>

                        <!-- Îâ¥Ïä§ ÏûàÏùå -->
                        <div x-show="analysisData?.news_signal?.news_count > 0">
                        <div class="grid grid-cols-4 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-gray-500">Îâ¥Ïä§ Ïã†Ìò∏</p>
                                <p class="text-xl font-bold"
                                   :class="{
                                       'text-red-600': analysisData?.news_signal?.signal === 'BUY',
                                       'text-blue-600': analysisData?.news_signal?.signal === 'SELL',
                                       'text-gray-600': analysisData?.news_signal?.signal === 'HOLD'
                                   }"
                                   x-text="analysisData?.news_signal?.signal_kr || '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Í∏çÏ†ï ÎπÑÏú®</p>
                                <p class="text-xl font-bold"
                                   :style="'color: ' + getSentimentTextColor(analysisData?.news_signal?.positive_ratio)"
                                   x-text="analysisData?.news_signal?.positive_ratio ? (analysisData.news_signal.positive_ratio * 100).toFixed(1) + '%' : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ïã†Î¢∞ÎèÑ</p>
                                <p class="text-xl font-bold text-blue-600"
                                   x-text="analysisData?.news_signal?.confidence ? (analysisData.news_signal.confidence * 100).toFixed(1) + '%' : '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Î∂ÑÏÑù Îâ¥Ïä§</p>
                                <p class="text-xl font-bold text-gray-900" x-text="analysisData?.news_signal?.news_count || 0"></p>
                            </div>
                        </div>

                        <!-- Í∏çÏ†ï ÎπÑÏú® Î∞î -->
                        <div class="mb-4">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-gray-500">0%</span>
                                <span class="text-gray-500">50%</span>
                                <span class="text-gray-500">100%</span>
                            </div>
                            <div class="w-full h-3 rounded-full bg-gray-200">
                                <div class="h-3 rounded-full transition-all"
                                     :style="'width: ' + (analysisData?.news_signal?.positive_ratio * 100) + '%; background-color: ' + getSentimentColor(analysisData?.news_signal?.positive_ratio)"></div>
                            </div>
                            <div class="flex justify-between text-xs mt-1">
                                <span class="text-red-400">Î∂ÄÏ†ïÏ†Å</span>
                                <span class="text-yellow-500">Ï§ëÎ¶Ω</span>
                                <span class="text-green-500">Í∏çÏ†ïÏ†Å</span>
                            </div>
                        </div>

                        <!-- Ï£ºÏöî Îâ¥Ïä§ -->
                        <div x-show="analysisData?.news_signal?.top_news?.length > 0">
                            <p class="text-sm font-medium text-gray-700 mb-2">Ï£ºÏöî Îâ¥Ïä§</p>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <template x-for="(news, idx) in (analysisData?.news_signal?.top_news || []).slice(0, 3)" :key="idx">
                                    <a :href="news.url" target="_blank" rel="noopener noreferrer"
                                       class="flex items-start p-2 bg-gray-50 rounded text-sm hover:bg-gray-100 transition cursor-pointer">
                                        <span class="inline-block w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center mr-2 flex-shrink-0"
                                              :class="{
                                                  'bg-green-100 text-green-700': news.sentiment === 'positive',
                                                  'bg-red-100 text-red-700': news.sentiment === 'negative',
                                                  'bg-gray-100 text-gray-600': news.sentiment === 'neutral'
                                              }"
                                              x-text="news.sentiment === 'positive' ? '+' : news.sentiment === 'negative' ? '-' : '='"></span>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-gray-900 truncate hover:text-blue-600" x-text="news.title"></p>
                                            <p class="text-xs text-gray-500" x-text="news.source"></p>
                                        </div>
                                        <i class="fas fa-external-link-alt text-gray-400 text-xs ml-2 flex-shrink-0"></i>
                                    </a>
                                </template>
                            </div>
                        </div>
                        </div>
                    </div>

                    <!-- ÏãúÍ∑∏ÎÑê -->
                    <div x-show="analysisData?.technical?.signals" class="card rounded-lg p-6">
                        <h4 class="font-semibold text-gray-900 mb-4">Í∏∞Ïà†Ï†Å ÏãúÍ∑∏ÎÑê</h4>
                        <div class="flex flex-wrap gap-2">
                            <template x-for="signal in analysisData?.technical?.signals" :key="signal">
                                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm">
                                    <i class="fas fa-check-circle text-green-500 mr-1"></i>
                                    <span x-text="signal"></span>
                                </span>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ï¢ÖÎ™© ÏÑ†ÌÉù Î™®Îã¨ -->
    <div x-show="showMarketSelector"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
         @click.self="showMarketSelector = false">

        <div class="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden"
             @click.stop>
            <div class="sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">Ï¢ÖÎ™© ÏÑ†ÌÉù</h3>
                    <p class="text-sm text-gray-500">Ïã§ÏãúÍ∞Ñ ÏãúÏÑ∏Ïóê Ï∂îÍ∞ÄÌï† Ï¢ÖÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>
                </div>
                <button @click="showMarketSelector = false" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-4 border-b">
                <input type="text" x-model="marketSelectorSearch"
                       placeholder="Ï¢ÖÎ™©Î™Ö ÎòêÎäî ÏΩîÎìú Í≤ÄÏÉâ..."
                       class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
            </div>

            <div class="overflow-y-auto max-h-[50vh]">
                <template x-for="market in filteredMarketsForSelector" :key="market.market">
                    <div class="flex items-center justify-between px-6 py-3 hover:bg-gray-50 border-b cursor-pointer"
                         @click="addToWatchlist(market.market)">
                        <div>
                            <span class="font-medium text-gray-900" x-text="market.market"></span>
                            <span class="text-sm text-gray-500 ml-2" x-text="market.korean_name"></span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-sm mr-3"
                                  :class="market.change_rate > 0 ? 'text-red-600' : 'text-blue-600'"
                                  x-text="(market.change_rate > 0 ? '+' : '') + market.change_rate.toFixed(2) + '%'"></span>
                            <span x-show="watchlistMarkets.includes(market.market)"
                                  class="text-green-500">
                                <i class="fas fa-check-circle"></i>
                            </span>
                            <span x-show="!watchlistMarkets.includes(market.market)"
                                  class="text-gray-300">
                                <i class="fas fa-plus-circle"></i>
                            </span>
                        </div>
                    </div>
                </template>
            </div>

            <div class="sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex justify-between items-center">
                <span class="text-sm text-gray-500">
                    ÏÑ†ÌÉùÎê®: <span class="font-medium" x-text="watchlistMarkets.length"></span>/10
                </span>
                <button @click="showMarketSelector = false"
                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                    ÏôÑÎ£å
                </button>
            </div>
        </div>
    </div>



    <!-- Axios for HTTP requests -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script src="/static/js/app.js"></script>

    <!-- Client-side error/log capture (sends to /api/client-log) -->
    <script>
        (function(){
            const sentMap = new Map();
            function shouldSend(key){
                const now = Date.now();
                const prev = sentMap.get(key) || 0;
                if(now - prev < 30000) return false; // ÎèôÏùº Î©îÏãúÏßÄ 30Ï¥à ÎÇ¥ Ïû¨Ï†ÑÏÜ° Í∏àÏßÄ
                sentMap.set(key, now);
                return true;
            }

            function sendLog(payload){
                try{
                    const url = '/api/client-log';
                    const body = JSON.stringify(payload);
                    if(navigator.sendBeacon){
                        const blob = new Blob([body], {type: 'application/json'});
                        navigator.sendBeacon(url, blob);
                        return;
                    }
                    fetch(url, {method:'POST', body: body, headers: {'Content-Type':'application/json'}, keepalive: true}).catch(()=>{});
                }catch(e){console.warn('sendLog failed', e)}
            }

            // console.error hook
            const origConsoleError = console.error;
            console.error = function(...args){
                try{
                    const message = args.map(a=> (a && a.stack) ? a.stack : (typeof a === 'object' ? JSON.stringify(a) : String(a))).join(' ');
                    const key = 'console:' + message;
                    if(shouldSend(key)) sendLog({level:'error', message, url: location.href, userAgent: navigator.userAgent});
                }catch(e){}
                origConsoleError.apply(console, args);
            };

            // window.onerror
            window.addEventListener('error', function(ev){
                try{
                    const message = ev.message + ' at ' + (ev.filename || '') + ':' + (ev.lineno||'') + ':' + (ev.colno||'');
                    const stack = ev.error && ev.error.stack ? ev.error.stack : null;
                    const key = 'onerror:' + message;
                    if(shouldSend(key)) sendLog({level:'error', message, stack, url: location.href, userAgent: navigator.userAgent});
                }catch(e){}
            });

            // unhandledrejection
            window.addEventListener('unhandledrejection', function(ev){
                try{
                    const reason = ev.reason;
                    const message = typeof reason === 'string' ? reason : (reason && reason.message) ? reason.message : JSON.stringify(reason);
                    const stack = reason && reason.stack ? reason.stack : null;
                    const key = 'rejection:' + message;
                    if(shouldSend(key)) sendLog({level:'error', message, stack, url: location.href, userAgent: navigator.userAgent});
                }catch(e){}
            });
        })();
    </script>

    <!-- Quick click/DOM watchdog for LSTM tab (non-Alpine) -->
    <script>
        (function(){
            function makeBadge(msg){
                let b = document.getElementById('lstm-debug-badge');
                if(!b){
                    b = document.createElement('div');
                    b.id = 'lstm-debug-badge';
                    b.style.position = 'fixed';
                    b.style.top = '80px';
                    b.style.right = '20px';
                    b.style.zIndex = '9999';
                    b.style.padding = '8px 10px';
                    b.style.background = 'rgba(59,130,246,0.95)';
                    b.style.color = '#fff';
                    b.style.borderRadius = '6px';
                    b.style.fontSize = '12px';
                    document.body.appendChild(b);
                }
                b.textContent = msg;
                setTimeout(()=>{ try{ b.style.opacity = '1'; }catch(e){} },0);
            }

            // ÌÉ≠ Î≤ÑÌäºÏùÑ Ï∞æÏïÑ ÌÅ¥Î¶≠ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            const tabs = Array.from(document.querySelectorAll('button'));
            const lstmBtn = tabs.find(t => (t.textContent || '').includes('LSTM'));

            function forceShowLstm(reason){
                try{
                    // ÏÉÅÏÑ∏ Î∂ÑÏÑù Î™®Îã¨Ïù¥ Ïó¥Î†§ ÏûàÏúºÎ©¥ Í∞ïÏ†ú ÌëúÏãú Ï§ëÎã® (Î™®Îã¨ UIÏôÄ Ï∂©Îèå Î∞©ÏßÄ)
                    const modal = document.querySelector('div.fixed.inset-0.bg-black');
                    if(modal && window.getComputedStyle(modal).display !== 'none' && window.getComputedStyle(modal).visibility !== 'hidden'){
                        console.log('[LSTM-FORCE] modal open, abort forcing LSTM');
                        makeBadge('LSTM force aborted: ÏÉÅÏÑ∏ Î™®Îã¨ Ïó¥Î¶º');
                        return false;
                    }

                    const candidate = document.getElementById('lstm-trader-container');
                    if(!candidate){ console.warn('[LSTM-FORCE] LSTM container not found'); return false; }
                    const cs = window.getComputedStyle(candidate);
                    console.log('[LSTM-FORCE] found container, display:', cs.display, 'visibility:', cs.visibility, 'opacity:', cs.opacity);
                    // Í∞ïÏ†ú ÌëúÏãú
                    candidate.style.display = 'block';
                    candidate.style.visibility = 'visible';
                    candidate.style.opacity = '1';
                    // ÎÇ¥Î∂Ä x-showÏóê ÏùòÌï¥ Ï†úÏñ¥ÎêòÎäî ÏûêÏãùÎì§ÎèÑ Î≥¥Ïù¥Í≤å Ï≤òÎ¶¨
                    Array.from(candidate.querySelectorAll('[x-show]')).forEach(el => {
                        el.style.display = 'block';
                        el.style.visibility = 'visible';
                        el.style.opacity = '1';
                    });
                    makeBadge('LSTM forced visible ('+reason+') at ' + new Date().toLocaleTimeString());
                    console.log('[LSTM-FORCE] forced visible');
                    return true;
                }catch(e){ console.error('[LSTM-FORCE] error', e); return false; }
            }

            if(lstmBtn){
                lstmBtn.addEventListener('click', function(){
                    console.log('[LSTM-WATCH] tab clicked');
                    makeBadge('LSTM tab clicked at ' + new Date().toLocaleTimeString());
                    // 200ms ÌõÑÏóê LSTM Ïª®ÌÖåÏù¥ÎÑà ÏúÑÏπò/Ïä§ÌÉÄÏùº ÏßÑÎã® Ïã§Ìñâ
                    setTimeout(()=>{
                        try{
                            const container = document.getElementById('lstm-trader-container');
                            if(!container){ console.warn('[LSTM-DIAG] container not found'); makeBadge('LSTM Ïª®ÌÖåÏù¥ÎÑà ÏóÜÏùå'); return; }
                            const cs = window.getComputedStyle(container);
                            const rect = container.getBoundingClientRect();
                            console.log('[LSTM-DIAG] container rect', rect, 'display', cs.display, 'visibility', cs.visibility, 'opacity', cs.opacity, 'children', container.children.length);
                            console.log('[LSTM-DIAG] innerText snippet:', container.innerText.slice(0,200));
                            // Í∞ïÏ°∞ Î∞è Ïä§ÌÅ¨Î°§
                            const prevOutline = container.style.outline;
                            container.style.outline = '3px dashed rgba(59,130,246,0.9)';
                            container.scrollIntoView({behavior:'smooth', block:'center'});
                            // Ï§ëÏïôÏùÑ Í∞ÄÎ¶¨Îäî ÏöîÏÜå Ï≤¥ÌÅ¨
                            const cx = rect.left + rect.width/2, cy = rect.top + rect.height/2;
                            const topEl = document.elementFromPoint(cx, cy);
                            console.log('[LSTM-DIAG] elementFromPoint at center:', topEl);
                            if(topEl && topEl !== container && !container.contains(topEl)){
                                console.warn('[LSTM-DIAG] Another element is covering container:', topEl);
                                makeBadge('LSTM Í∞ÄÎ†§Ïßê: ' + (topEl.className || topEl.tagName));
                            } else {
                                makeBadge('LSTM Ïª®ÌÖåÏù¥ÎÑà ÏúÑÏπò ÌôïÏù∏Îê®');
                            }
                            setTimeout(()=>{ try{ container.style.outline = prevOutline; }catch(e){} }, 3000);
                        }catch(e){ console.error('[LSTM-DIAG] error', e); makeBadge('LSTM ÏßÑÎã® Ïã§Ìå®'); }
                    }, 200);
                });
            }

            // Í∞úÎ∞úÏûêÍ∞Ä ÏàòÎèôÏúºÎ°ú Í∞ïÏ†ú Î≥¥Ïó¨Ï£ºÍ∏∞ Î≤ÑÌäºÏùÑ ÏÉùÏÑ± (Ïò§Î•∏Ï™Ω ÏÉÅÎã®)
            (function addManualShowBtn(){
                try{
                    const b = document.createElement('button');
                    b.textContent = 'ÎîîÎ≤ÑÍ∑∏ LSTM ÏúÑÏπò';
                    b.style.position = 'fixed';
                    b.style.top = '48px';
                    b.style.right = '20px';
                    b.style.zIndex = '9999';
                    b.className = 'px-3 py-1 bg-indigo-600 text-white rounded';
                    b.addEventListener('click', ()=>{
                        console.log('[LSTM-DIAG] manual trigger');
                        // Ïû¨ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏßÑÎã® Î°úÏßÅ Ìò∏Ï∂ú
                        try{
                            const container = document.getElementById('lstm-trader-container');
                            if(!container){ console.warn('[LSTM-DIAG] container not found'); makeBadge('LSTM Ïª®ÌÖåÏù¥ÎÑà ÏóÜÏùå'); return; }
                            const cs = window.getComputedStyle(container);
                            const rect = container.getBoundingClientRect();
                            console.log('[LSTM-DIAG] manual: rect', rect, 'display', cs.display, 'visibility', cs.visibility, 'opacity', cs.opacity);
                            container.style.outline = '3px dashed rgba(59,130,246,0.95)';
                            container.scrollIntoView({behavior:'smooth', block:'center'});
                            // ÌôïÏù∏ÌïòÎ©¥ Í∞ïÏ†ú ÌëúÏãú ÏãúÎèÑ
                            setTimeout(()=>{ if(confirm('LSTM Ïª®ÌÖåÏù¥ÎÑàÍ∞Ä Î≥¥Ïù¥ÏßÄ ÏïäÎÇòÏöî? OKÎ•º ÎàÑÎ•¥Î©¥ Í∞ïÏ†ú ÎÖ∏Ï∂úÏùÑ ÏãúÎèÑÌï©ÎãàÎã§.')){ forceShowLstm('manual-confirm'); } container.style.outline = ''; }, 500);
                        }catch(e){ console.error('[LSTM-DIAG] manual error', e); }
                    });
                    document.body.appendChild(b);
                }catch(e){console.warn('addManualShowBtn failed', e)}
            })();

            // DOM Î≥ÄÌôî Í∞êÏãú (LSTM Ïª®ÌÖåÏù¥ÎÑàÍ∞Ä Î≥¥Ïù¥Î©¥ ÏïåÎ†§Ï§å)
            const observer = new MutationObserver((mutations)=>{
                for(const m of mutations){
                    if(m.addedNodes){
                        m.addedNodes.forEach(node=>{
                            if(node.nodeType===1 && node.querySelector){
                                const el = node.querySelector('[x-show]');
                                // Îã®Ïàú Í∞êÏßÄ: LSTM Îã®ÌÉÄ ÌÖçÏä§Ìä∏ Ìè¨Ìï® Ïó¨Î∂Ä
                                if(el && (el.textContent||'').includes('LSTM Îã®ÌÉÄ')){
                                    console.log('[LSTM-WATCH] LSTM container mutation observed');
                                    makeBadge('LSTM container observed at ' + new Date().toLocaleTimeString());
                                }
                            }
                        });
                    }
                }
            });
            observer.observe(document.body, {childList:true, subtree:true});

            // ESC ÌÇ§Î°ú ÏÉÅÏÑ∏ Î™®Îã¨ Îã´Í∏∞(ÏïàÏ†ÑÏû•Ïπò)
            document.addEventListener('keydown', (ev) => {
                try{
                    if(ev.key === 'Escape'){
                        const closeIcon = document.querySelector('div.fixed.inset-0 .fa-times');
                        if(closeIcon){
                            const btn = closeIcon.closest('button');
                            if(btn){ btn.click(); makeBadge('ESCÎ°ú Î™®Îã¨ Îã´Ïùå'); }
                        }
                    }
                }catch(e){ console.warn('ESC close handler error', e); }
            });

            // Ï¥àÍ∏∞ ÏïàÎÇ¥ÌëúÏãú
            makeBadge('ÌéòÏù¥ÏßÄ Î°úÎìú: LSTM ÎîîÎ≤ÑÍ∑∏ ÌôúÏÑ±Ìôî');
        })();
    </script>
</body>
</html>
